import{s as ge,f as C,l as D,a as j,g as P,h as U,m as B,d as m,c as V,j as v,i as N,C as w,L as ee,x as G,n as Q,r as X,F as pe,y as ne,R as Te,J as et,E as Ot,S as Ve,U as It,e as se,w as Mt,Y as Ye,p as Pe,W as Se,o as el,T as Z,H as We,I as Ke}from"./scheduler.b8cd85ff.js";import{S as he,i as ve,a as z,g as me,t as q,c as be,b as ae,d as re,m as ue,e as fe,p as Oe}from"./index.35665f17.js";import{e as Ee,u as tt,d as lt}from"./each.a1a4b9c9.js";import{a as Re,p as nt,d as ce,e as Ue}from"./settings.88550f80.js";import{c as tl,e as ll,f as nl,h as ol,j as Ft,r as Be,A as il,k as Ge,l as sl,b as je,m as Rt,n as Lt,H as al,o as rl,p as Je,g as ul,i as ot,a as it,S as fl,N as cl,L as dl,q as _l,s as ml,t as st,M as bl,D as gl,u as pl,v as hl}from"./FooterMenu.1197af10.js";import{i as Ut,a as Xe,k as at,e as vl,l as Fe,c as De}from"./bookmarkEvents.1341752b.js";import{t as oe,m as ye}from"./store.967fbeb2.js";import{t as ze,a as Ne}from"./kind.df02593b.js";import{a as kl}from"./navigation.3f69098d.js";const wl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M21 6c0 .55-.45 1-1 1h-1v1c0 .55-.45 1-1 1s-1-.45-1-1V7h-1c-.55 0-1-.45-1-1s.45-1 1-1h1V4c0-.55.45-1 1-1s1 .45 1 1v1h1c.55 0 1 .45 1 1zm-2 13.48c0 .72-.73 1.2-1.39.92L12 18l-5.61 2.4A.994.994 0 0 1 5 19.48V5c0-1.1.9-2 2-2h7a5.002 5.002 0 0 0 5 7.9v8.58z"/></svg>';function yl(n){let e,l=n[3]("modal.addNote_body")+"",t,o,i,s,a,r,u,f,c,d,h,g,A,S;return{c(){e=C("article"),t=D(l),o=j(),i=C("input"),s=j(),a=C("footer"),r=C("button"),u=D("Private"),c=j(),d=C("button"),h=D("Public"),this.h()},l(b){e=P(b,"ARTICLE",{class:!0});var p=U(e);t=B(p,l),p.forEach(m),o=V(b),i=P(b,"INPUT",{class:!0,type:!0,placeholder:!0}),s=V(b),a=P(b,"FOOTER",{class:!0});var E=U(a);r=P(E,"BUTTON",{class:!0});var F=U(r);u=B(F,"Private"),F.forEach(m),c=V(E),d=P(E,"BUTTON",{class:!0});var L=U(d);h=B(L,"Public"),L.forEach(m),E.forEach(m),this.h()},h(){v(e,"class","body"),v(i,"class","input p-2 m-2"),v(i,"type","text"),v(i,"placeholder","note..."),v(r,"class",f="btn variant-filled-warning "+n[1].buttonPositive),v(d,"class",g="btn "+n[1].buttonPositive),v(a,"class","gap-2 flex flex-wrap justify-end mt-2")},m(b,p){N(b,e,p),w(e,t),N(b,o,p),N(b,i,p),ee(i,n[2]),N(b,s,p),N(b,a,p),w(a,r),w(r,u),w(a,c),w(a,d),w(d,h),A||(S=[G(i,"input",n[6]),G(r,"click",n[7]),G(d,"click",n[8])],A=!0)},p(b,[p]){p&8&&l!==(l=b[3]("modal.addNote_body")+"")&&Q(t,l),p&4&&i.value!==b[2]&&ee(i,b[2]),p&2&&f!==(f="btn variant-filled-warning "+b[1].buttonPositive)&&v(r,"class",f),p&2&&g!==(g="btn "+b[1].buttonPositive)&&v(d,"class",g)},i:X,o:X,d(b){b&&(m(e),m(o),m(i),m(s),m(a)),A=!1,pe(S)}}}function El(n,e,l){let t;ne(n,Re,d=>l(3,t=d));let{res:o}=e,{parent:i}=e,{onFormSubmit:s}=e,a;async function r(){const d=await tl(a);if(d.error&&d.message){const h={message:d.message,timeout:3e3,background:"bg-orange-500 text-white width-filled "};oe.trigger(h);return}else d.tag&&(l(0,o.tag=d.tag,o),s())}function u(){a=this.value,l(2,a)}const f=()=>{l(0,o.btn="prv",o),r()},c=()=>{l(0,o.btn="pub",o),r()};return n.$$set=d=>{"res"in d&&l(0,o=d.res),"parent"in d&&l(1,i=d.parent),"onFormSubmit"in d&&l(5,s=d.onFormSubmit)},[o,i,a,t,r,s,u,f,c]}class Nl extends he{constructor(e){super(),ve(this,e,El,yl,ge,{res:0,parent:1,onFormSubmit:5})}}function Tl(n){let e,l="nostr:npub1... or npub1... or nprofile...",t,o,i,s,a,r,u,f,c,d,h,g,A,S;return{c(){e=C("article"),t=D(l),o=j(),i=C("input"),s=j(),a=C("footer"),r=C("button"),u=D("Private"),c=j(),d=C("button"),h=D("Public"),this.h()},l(b){e=P(b,"ARTICLE",{class:!0});var p=U(e);t=B(p,l),p.forEach(m),o=V(b),i=P(b,"INPUT",{class:!0,type:!0,placeholder:!0}),s=V(b),a=P(b,"FOOTER",{class:!0});var E=U(a);r=P(E,"BUTTON",{class:!0});var F=U(r);u=B(F,"Private"),F.forEach(m),c=V(E),d=P(E,"BUTTON",{class:!0});var L=U(d);h=B(L,"Public"),L.forEach(m),E.forEach(m),this.h()},h(){v(e,"class","body"),v(i,"class","input p-2 m-2"),v(i,"type","text"),v(i,"placeholder","npub..."),v(r,"class",f="btn variant-filled-warning "+n[1].buttonPositive),v(d,"class",g="btn "+n[1].buttonPositive),v(a,"class","gap-2 flex flex-wrap justify-end mt-2")},m(b,p){N(b,e,p),w(e,t),N(b,o,p),N(b,i,p),ee(i,n[2]),N(b,s,p),N(b,a,p),w(a,r),w(r,u),w(a,c),w(a,d),w(d,h),A||(S=[G(i,"input",n[5]),G(r,"click",n[6]),G(d,"click",n[7])],A=!0)},p(b,[p]){p&4&&i.value!==b[2]&&ee(i,b[2]),p&2&&f!==(f="btn variant-filled-warning "+b[1].buttonPositive)&&v(r,"class",f),p&2&&g!==(g="btn "+b[1].buttonPositive)&&v(d,"class",g)},i:X,o:X,d(b){b&&(m(e),m(o),m(i),m(s),m(a)),A=!1,pe(S)}}}function Al(n,e,l){let{res:t}=e,{parent:o}=e,{onFormSubmit:i}=e,s;async function a(){const c=await ll(s);if(c.error&&c.message){const d={message:c.message,timeout:3e3,background:"bg-orange-500 text-white width-filled "};oe.trigger(d);return}c.tag&&(l(0,t.tag=c.tag,t),l(0,t.check=!0,t),i())}function r(){s=this.value,l(2,s)}const u=()=>{l(0,t.btn="prv",t),a()},f=()=>{l(0,t.btn="pub",t),a()};return n.$$set=c=>{"res"in c&&l(0,t=c.res),"parent"in c&&l(1,o=c.parent),"onFormSubmit"in c&&l(4,i=c.onFormSubmit)},[t,o,s,a,i,r,u,f]}class Cl extends he{constructor(e){super(),ve(this,e,Al,Tl,ge,{res:0,parent:1,onFormSubmit:4})}}function Pl(n){let e,l="nostr:note... or note... or nevent...",t,o,i,s,a,r,u,f,c,d,h,g,A,S;return{c(){e=C("article"),t=D(l),o=j(),i=C("input"),s=j(),a=C("footer"),r=C("button"),u=D("Private"),c=j(),d=C("button"),h=D("Public"),this.h()},l(b){e=P(b,"ARTICLE",{class:!0});var p=U(e);t=B(p,l),p.forEach(m),o=V(b),i=P(b,"INPUT",{class:!0,type:!0,placeholder:!0}),s=V(b),a=P(b,"FOOTER",{class:!0});var E=U(a);r=P(E,"BUTTON",{class:!0});var F=U(r);u=B(F,"Private"),F.forEach(m),c=V(E),d=P(E,"BUTTON",{class:!0});var L=U(d);h=B(L,"Public"),L.forEach(m),E.forEach(m),this.h()},h(){v(e,"class","body"),v(i,"class","input p-2 m-2"),v(i,"type","text"),v(i,"placeholder","note..."),v(r,"class",f="btn variant-filled-warning "+n[1].buttonPositive),v(d,"class",g="btn "+n[1].buttonPositive),v(a,"class","gap-2 flex flex-wrap justify-end mt-2")},m(b,p){N(b,e,p),w(e,t),N(b,o,p),N(b,i,p),ee(i,n[2]),N(b,s,p),N(b,a,p),w(a,r),w(r,u),w(a,c),w(a,d),w(d,h),A||(S=[G(i,"input",n[5]),G(r,"click",n[6]),G(d,"click",n[7])],A=!0)},p(b,[p]){p&4&&i.value!==b[2]&&ee(i,b[2]),p&2&&f!==(f="btn variant-filled-warning "+b[1].buttonPositive)&&v(r,"class",f),p&2&&g!==(g="btn "+b[1].buttonPositive)&&v(d,"class",g)},i:X,o:X,d(b){b&&(m(e),m(o),m(i),m(s),m(a)),A=!1,pe(S)}}}function Sl(n,e,l){let{res:t}=e,{parent:o}=e,{onFormSubmit:i}=e,s;async function a(){const c=await nl(s);if(c.error&&c.message){const d={message:c.message,timeout:3e3,background:"bg-orange-500 text-white width-filled "};oe.trigger(d);return}else c.tag&&(l(0,t.tag=c.tag,t),i())}function r(){s=this.value,l(2,s)}const u=()=>{l(0,t.btn="prv",t),a()},f=()=>{l(0,t.btn="pub",t),a()};return n.$$set=c=>{"res"in c&&l(0,t=c.res),"parent"in c&&l(1,o=c.parent),"onFormSubmit"in c&&l(4,i=c.onFormSubmit)},[t,o,s,a,i,r,u,f]}class Ol extends he{constructor(e){super(),ve(this,e,Sl,Pl,ge,{res:0,parent:1,onFormSubmit:4})}}function Il(n){let e,l="nostr:naddr... or naddr...",t,o,i,s,a,r,u,f,c,d,h,g,A,S;return{c(){e=C("article"),t=D(l),o=j(),i=C("input"),s=j(),a=C("footer"),r=C("button"),u=D("Private"),c=j(),d=C("button"),h=D("Public"),this.h()},l(b){e=P(b,"ARTICLE",{class:!0});var p=U(e);t=B(p,l),p.forEach(m),o=V(b),i=P(b,"INPUT",{class:!0,type:!0,placeholder:!0}),s=V(b),a=P(b,"FOOTER",{class:!0});var E=U(a);r=P(E,"BUTTON",{class:!0});var F=U(r);u=B(F,"Private"),F.forEach(m),c=V(E),d=P(E,"BUTTON",{class:!0});var L=U(d);h=B(L,"Public"),L.forEach(m),E.forEach(m),this.h()},h(){v(e,"class","body"),v(i,"class","input p-2 m-2"),v(i,"type","text"),v(i,"placeholder","naddr..."),v(r,"class",f="btn variant-filled-warning "+n[1].buttonPositive),v(d,"class",g="btn "+n[1].buttonPositive),v(a,"class","gap-2 flex flex-wrap justify-end mt-2")},m(b,p){N(b,e,p),w(e,t),N(b,o,p),N(b,i,p),ee(i,n[2]),N(b,s,p),N(b,a,p),w(a,r),w(r,u),w(a,c),w(a,d),w(d,h),A||(S=[G(i,"input",n[5]),G(r,"click",n[6]),G(d,"click",n[7])],A=!0)},p(b,[p]){p&4&&i.value!==b[2]&&ee(i,b[2]),p&2&&f!==(f="btn variant-filled-warning "+b[1].buttonPositive)&&v(r,"class",f),p&2&&g!==(g="btn "+b[1].buttonPositive)&&v(d,"class",g)},i:X,o:X,d(b){b&&(m(e),m(o),m(i),m(s),m(a)),A=!1,pe(S)}}}function Ml(n,e,l){let{res:t}=e,{parent:o}=e,{onFormSubmit:i}=e,s;async function a(){const c=await ol(s);if(c.error&&c.message){const d={message:c.message,timeout:3e3,background:"bg-orange-500 text-white width-filled "};oe.trigger(d);return}else c.tag&&(l(0,t.tag=c.tag,t),i())}function r(){s=this.value,l(2,s)}const u=()=>{l(0,t.btn="prv",t),a()},f=()=>{l(0,t.btn="pub",t),a()};return n.$$set=c=>{"res"in c&&l(0,t=c.res),"parent"in c&&l(1,o=c.parent),"onFormSubmit"in c&&l(4,i=c.onFormSubmit)},[t,o,s,a,i,r,u,f]}class Fl extends he{constructor(e){super(),ve(this,e,Ml,Il,ge,{res:0,parent:1,onFormSubmit:4})}}function Rl(n){let e,l="emoji",t,o,i,s,a="emoji name",r,u,f,c,d="image url",h,g,A,S,b,p,E,F,L,I,_,k;return{c(){e=C("article"),t=D(l),o=j(),i=C("div"),s=C("div"),s.textContent=a,r=j(),u=C("input"),f=j(),c=C("div"),c.textContent=d,h=j(),g=C("input"),A=j(),S=C("img"),p=j(),E=C("footer"),F=C("button"),L=D("SAVE"),this.h()},l(O){e=P(O,"ARTICLE",{class:!0});var y=U(e);t=B(y,l),y.forEach(m),o=V(O),i=P(O,"DIV",{class:!0});var M=U(i);s=P(M,"DIV",{class:!0,"data-svelte-h":!0}),Te(s)!=="svelte-fjguxa"&&(s.textContent=a),r=V(M),u=P(M,"INPUT",{class:!0,type:!0,placeholder:!0}),f=V(M),c=P(M,"DIV",{class:!0,"data-svelte-h":!0}),Te(c)!=="svelte-1x52t2t"&&(c.textContent=d),h=V(M),g=P(M,"INPUT",{class:!0,type:!0,placeholder:!0}),M.forEach(m),A=V(O),S=P(O,"IMG",{src:!0,alt:!0,width:!0}),p=V(O),E=P(O,"FOOTER",{class:!0});var R=U(E);F=P(R,"BUTTON",{class:!0});var W=U(F);L=B(W,"SAVE"),W.forEach(m),R.forEach(m),this.h()},h(){v(e,"class","body"),v(s,"class","input-group-shim"),v(u,"class","input p-2 my-2 w-full"),v(u,"type","text"),v(u,"placeholder","name"),v(c,"class","input-group-shim"),v(g,"class","input p-2 my-2"),v(g,"type","text"),v(g,"placeholder","https://.....png"),v(i,"class","mt-2 input-group input-group-divider grid-rows-[auto_auto_auto_auto]"),et(S.src,b=n[2])||v(S,"src",b),v(S,"alt","emojiUrl"),v(S,"width","64px"),v(F,"class",I="btn "+n[1].buttonPositive),v(E,"class","gap-2 flex flex-wrap justify-end mt-2")},m(O,y){N(O,e,y),w(e,t),N(O,o,y),N(O,i,y),w(i,s),w(i,r),w(i,u),ee(u,n[3]),w(i,f),w(i,c),w(i,h),w(i,g),ee(g,n[2]),N(O,A,y),N(O,S,y),N(O,p,y),N(O,E,y),w(E,F),w(F,L),_||(k=[G(u,"input",n[7]),G(u,"input",n[8]),G(g,"input",n[9]),G(F,"click",n[10])],_=!0)},p(O,[y]){y&8&&u.value!==O[3]&&ee(u,O[3]),y&4&&g.value!==O[2]&&ee(g,O[2]),y&4&&!et(S.src,b=O[2])&&v(S,"src",b),y&2&&I!==(I="btn "+O[1].buttonPositive)&&v(F,"class",I)},i:X,o:X,d(O){O&&(m(e),m(o),m(i),m(A),m(S),m(p),m(E)),_=!1,pe(k)}}}function Ll(n,e,l){let{res:t}=e,{parent:o}=e,{onFormSubmit:i}=e,{tag:s}=e,a=s?s[2]:"",r=s?s[1]:"";async function u(){r===""||a===""||(l(0,t.tag=["emoji",r,a],t),l(0,t.check=!0,t),i())}function f(){r=this.value,l(3,r)}const c=()=>l(3,r=r.replace(/[^a-zA-Z0-9-_]/g,""));function d(){a=this.value,l(2,a)}const h=()=>{l(0,t.btn="pub",t),u()};return n.$$set=g=>{"res"in g&&l(0,t=g.res),"parent"in g&&l(1,o=g.parent),"onFormSubmit"in g&&l(5,i=g.onFormSubmit),"tag"in g&&l(6,s=g.tag)},[t,o,a,r,u,i,s,f,c,d,h]}class Ul extends he{constructor(e){super(),ve(this,e,Ll,Rl,ge,{res:0,parent:1,onFormSubmit:5,tag:6})}}function Dl(n){let e,l="input relay URL",t,o,i,s,a,r,u,f,c,d;return{c(){e=C("article"),t=D(l),o=j(),i=C("input"),s=j(),a=C("footer"),r=C("button"),u=D("Add"),this.h()},l(h){e=P(h,"ARTICLE",{class:!0});var g=U(e);t=B(g,l),g.forEach(m),o=V(h),i=P(h,"INPUT",{class:!0,type:!0,placeholder:!0}),s=V(h),a=P(h,"FOOTER",{class:!0});var A=U(a);r=P(A,"BUTTON",{class:!0});var S=U(r);u=B(S,"Add"),S.forEach(m),A.forEach(m),this.h()},h(){v(e,"class","body"),v(i,"class","input p-2 m-2"),v(i,"type","text"),v(i,"placeholder","wss://..."),v(r,"class",f="btn "+n[1].buttonPositive),v(a,"class","gap-2 flex flex-wrap justify-end mt-2")},m(h,g){N(h,e,g),w(e,t),N(h,o,g),N(h,i,g),ee(i,n[2]),N(h,s,g),N(h,a,g),w(a,r),w(r,u),c||(d=[G(i,"input",n[8]),G(r,"click",n[9])],c=!0)},p(h,[g]){g&4&&i.value!==h[2]&&ee(i,h[2]),g&2&&f!==(f="btn "+h[1].buttonPositive)&&v(r,"class",f)},i:X,o:X,d(h){h&&(m(e),m(o),m(i),m(s),m(a)),c=!1,pe(d)}}}function Bl(n,e,l){let t;ne(n,Re,g=>l(10,t=g));let{res:o}=e,{parent:i}=e,{onFormSubmit:s}=e,{tag:a}=e,{number:r}=e,{viewList:u}=e,f=a?a[1]:"";async function c(){if(l(2,f=f.trim()),f==="")return;f.endsWith("/")||l(2,f+="/");const g=u.findIndex(S=>(S[1].endsWith("/")?S[1]:S[1]+"/")===f);if(g!==-1&&r!==g){const S={message:t("toast.invalidEmoji"),timeout:3e3,background:"bg-orange-500 text-white width-filled "};oe.trigger(S);return}if(await Ft(f))l(0,o.tag=["relay",f],o),console.log(o.tag),s();else{const S={message:`${t("toast.checkRelay")}`,timeout:3e3,background:"bg-orange-500 text-white width-filled "};oe.trigger(S);return}}function d(){f=this.value,l(2,f)}const h=()=>{l(0,o.btn="pub",o),c()};return n.$$set=g=>{"res"in g&&l(0,o=g.res),"parent"in g&&l(1,i=g.parent),"onFormSubmit"in g&&l(4,s=g.onFormSubmit),"tag"in g&&l(5,a=g.tag),"number"in g&&l(6,r=g.number),"viewList"in g&&l(7,u=g.viewList)},[o,i,f,c,s,a,r,u,d,h]}class jl extends he{constructor(e){super(),ve(this,e,Bl,Dl,ge,{res:0,parent:1,onFormSubmit:4,tag:5,number:6,viewList:7})}}function Vl(n){let e,l="input relay url and select type ",t,o,i,s,a="relay url",r,u,f,c,d="type",h,g,A,S="read/write",b,p="write",E,F="read",L,I,_,k,O,y,M;return{c(){e=C("article"),t=D(l),o=j(),i=C("div"),s=C("div"),s.textContent=a,r=j(),u=C("input"),f=j(),c=C("div"),c.textContent=d,h=j(),g=C("select"),A=C("option"),A.textContent=S,b=C("option"),b.textContent=p,E=C("option"),E.textContent=F,L=j(),I=C("footer"),_=C("button"),k=D("SAVE"),this.h()},l(R){e=P(R,"ARTICLE",{class:!0});var W=U(e);t=B(W,l),W.forEach(m),o=V(R),i=P(R,"DIV",{class:!0});var $=U(i);s=P($,"DIV",{class:!0,"data-svelte-h":!0}),Te(s)!=="svelte-157bgcd"&&(s.textContent=a),r=V($),u=P($,"INPUT",{class:!0,type:!0,placeholder:!0}),f=V($),c=P($,"DIV",{class:!0,"data-svelte-h":!0}),Te(c)!=="svelte-1wu67pv"&&(c.textContent=d),h=V($),g=P($,"SELECT",{class:!0});var ie=U(g);A=P(ie,"OPTION",{"data-svelte-h":!0}),Te(A)!=="svelte-a7lqkj"&&(A.textContent=S),b=P(ie,"OPTION",{"data-svelte-h":!0}),Te(b)!=="svelte-14blac8"&&(b.textContent=p),E=P(ie,"OPTION",{"data-svelte-h":!0}),Te(E)!=="svelte-9bsxou"&&(E.textContent=F),ie.forEach(m),$.forEach(m),L=V(R),I=P(R,"FOOTER",{class:!0});var de=U(I);_=P(de,"BUTTON",{class:!0});var Y=U(_);k=B(Y,"SAVE"),Y.forEach(m),de.forEach(m),this.h()},h(){v(e,"class","body"),v(s,"class","input-group-shim"),v(u,"class","input p-2 my-2 w-full"),v(u,"type","text"),v(u,"placeholder","wss://..."),v(c,"class","input-group-shim"),A.__value="both",ee(A,A.__value),b.__value="write",ee(b,b.__value),E.__value="read",ee(E,E.__value),v(g,"class","select"),n[3]===void 0&&Ot(()=>n[8].call(g)),v(i,"class","mt-2 input-group input-group-divider grid-rows-[auto_auto_auto_auto]"),v(_,"class",O="btn "+n[1].buttonPositive),v(I,"class","gap-2 flex flex-wrap justify-end mt-2")},m(R,W){N(R,e,W),w(e,t),N(R,o,W),N(R,i,W),w(i,s),w(i,r),w(i,u),ee(u,n[2]),w(i,f),w(i,c),w(i,h),w(i,g),w(g,A),w(g,b),w(g,E),Ve(g,n[3],!0),N(R,L,W),N(R,I,W),w(I,_),w(_,k),y||(M=[G(u,"input",n[7]),G(g,"change",n[8]),G(_,"click",n[9])],y=!0)},p(R,[W]){W&4&&u.value!==R[2]&&ee(u,R[2]),W&8&&Ve(g,R[3]),W&2&&O!==(O="btn "+R[1].buttonPositive)&&v(_,"class",O)},i:X,o:X,d(R){R&&(m(e),m(o),m(i),m(L),m(I)),y=!1,pe(M)}}}function zl(n){if(!n||n.length===2)return"both";if(n.length===3){if(n[2]==="read")return"read";if(n[2]==="write")return"write"}return"both"}function Hl(n,e,l){let t;ne(n,Re,g=>l(10,t=g));let{res:o}=e,{parent:i}=e,{onFormSubmit:s}=e,{tag:a}=e;console.log(a);let r=a?a[1]:"",u=zl(a);async function f(){if(l(2,r=r.trim()),r==="")return;if(r.endsWith("/")||l(2,r+="/"),await Ft(r))l(0,o.tag=u==="both"?["r",r]:["r",r,u==="read"?"read":"write"],o),console.log(o.tag),l(0,o.check=!0,o),s();else{const A={message:`${t("toast.checkRelay")}`,timeout:3e3,background:"bg-orange-500 text-white width-filled "};oe.trigger(A);return}}function c(){r=this.value,l(2,r)}function d(){u=It(this),l(3,u)}const h=()=>{l(0,o.btn="pub",o),f()};return n.$$set=g=>{"res"in g&&l(0,o=g.res),"parent"in g&&l(1,i=g.parent),"onFormSubmit"in g&&l(5,s=g.onFormSubmit),"tag"in g&&l(6,a=g.tag)},[o,i,r,u,f,s,a,c,d,h]}class ql extends he{constructor(e){super(),ve(this,e,Hl,Vl,ge,{res:0,parent:1,onFormSubmit:5,tag:6})}}function rt(n,e,l){const t=n.slice();return t[13]=e[l],t}function ut(n,e,l){const t=n.slice();return t[13]=e[l],t}function ft(n,e){let l,t=ze[e[13]]+"",o,i;return{key:n,first:null,c(){l=C("span"),o=D(t),i=D(" ,"),this.h()},l(s){l=P(s,"SPAN",{class:!0});var a=U(l);o=B(a,t),i=B(a," ,"),a.forEach(m),this.h()},h(){v(l,"class","px-1"),this.first=l},m(s,a){N(s,l,a),w(l,o),w(l,i)},p(s,a){e=s,a&4&&t!==(t=ze[e[13]]+"")&&Q(o,t)},d(s){s&&m(l)}}}function ct(n,e){let l,t=ze[e[13]]+"",o,i;return{key:n,first:null,c(){l=C("option"),o=D(t),this.h()},l(s){l=P(s,"OPTION",{});var a=U(l);o=B(a,t),a.forEach(m),this.h()},h(){l.__value=i=e[13],ee(l,l.__value),this.first=l},m(s,a){N(s,l,a),w(l,o)},p(s,a){e=s,a&4&&t!==(t=ze[e[13]]+"")&&Q(o,t),a&4&&i!==(i=e[13])&&(l.__value=i,ee(l,l.__value))},d(s){s&&m(l)}}}function Jl(n){let e,l=[],t=new Map,o,i,s,a=[],r=new Map,u,f,c,d,h,g,A,S,b,p,E,F,L,I=Ee(n[2]);const _=y=>y[13];for(let y=0;y<I.length;y+=1){let M=ut(n,I,y),R=_(M);t.set(R,l[y]=ft(R,M))}let k=Ee(n[2]);const O=y=>y[13];for(let y=0;y<k.length;y+=1){let M=rt(n,k,y),R=O(M);r.set(R,a[y]=ct(R,M))}return{c(){e=C("article");for(let y=0;y<l.length;y+=1)l[y].c();o=j(),i=C("div"),s=C("select");for(let y=0;y<a.length;y+=1)a[y].c();u=j(),f=C("input"),c=j(),d=C("footer"),h=C("button"),g=D("Private"),S=j(),b=C("button"),p=D("Public"),this.h()},l(y){e=P(y,"ARTICLE",{class:!0});var M=U(e);for(let Y=0;Y<l.length;Y+=1)l[Y].l(M);M.forEach(m),o=V(y),i=P(y,"DIV",{class:!0});var R=U(i);s=P(R,"SELECT",{class:!0});var W=U(s);for(let Y=0;Y<a.length;Y+=1)a[Y].l(W);W.forEach(m),u=V(R),f=P(R,"INPUT",{class:!0,type:!0,placeholder:!0}),R.forEach(m),c=V(y),d=P(y,"FOOTER",{class:!0});var $=U(d);h=P($,"BUTTON",{class:!0});var ie=U(h);g=B(ie,"Private"),ie.forEach(m),S=V($),b=P($,"BUTTON",{class:!0});var de=U(b);p=B(de,"Public"),de.forEach(m),$.forEach(m),this.h()},h(){v(e,"class","body"),v(s,"class","input-group-shim select px-1"),n[3]===void 0&&Ot(()=>n[9].call(s)),v(f,"class","input px-1"),v(f,"type","text"),v(f,"placeholder",n[5]),v(i,"class","input-group input-group-divider grid-cols-[auto_1fr] m-2"),v(h,"class",A="btn variant-filled-warning "+n[1].buttonPositive),v(b,"class",E="btn "+n[1].buttonPositive),v(d,"class","gap-2 flex flex-wrap justify-end mt-2")},m(y,M){N(y,e,M);for(let R=0;R<l.length;R+=1)l[R]&&l[R].m(e,null);N(y,o,M),N(y,i,M),w(i,s);for(let R=0;R<a.length;R+=1)a[R]&&a[R].m(s,null);Ve(s,n[3],!0),w(i,u),w(i,f),ee(f,n[4]),N(y,c,M),N(y,d,M),w(d,h),w(h,g),w(d,S),w(d,b),w(b,p),F||(L=[G(s,"change",n[9]),G(f,"input",n[10]),G(h,"click",n[11]),G(b,"click",n[12])],F=!0)},p(y,[M]){M&4&&(I=Ee(y[2]),l=tt(l,M,_,1,y,I,t,e,lt,ft,null,ut)),M&4&&(k=Ee(y[2]),a=tt(a,M,O,1,y,k,r,s,lt,ct,null,rt)),M&12&&Ve(s,y[3]),M&32&&v(f,"placeholder",y[5]),M&16&&f.value!==y[4]&&ee(f,y[4]),M&2&&A!==(A="btn variant-filled-warning "+y[1].buttonPositive)&&v(h,"class",A),M&2&&E!==(E="btn "+y[1].buttonPositive)&&v(b,"class",E)},i:X,o:X,d(y){y&&(m(e),m(o),m(i),m(c),m(d));for(let M=0;M<l.length;M+=1)l[M].d();for(let M=0;M<a.length;M+=1)a[M].d();F=!1,pe(L)}}}function Wl(n,e,l){let t,{res:o}=e,{parent:i}=e,{onFormSubmit:s}=e,{tag:a}=e,{countCharacters:r}=e,u=a?a[0]:r[0],f=a?a[1]:"";async function c(){f!=""&&(l(0,o.tag=[u,f],o),l(0,o.check=!0,o),s())}function d(){u=It(this),l(3,u),l(2,r)}function h(){f=this.value,l(4,f)}const g=()=>{l(0,o.btn="prv",o),c()},A=()=>{l(0,o.btn="pub",o),c()};return n.$$set=S=>{"res"in S&&l(0,o=S.res),"parent"in S&&l(1,i=S.parent),"onFormSubmit"in S&&l(7,s=S.onFormSubmit),"tag"in S&&l(8,a=S.tag),"countCharacters"in S&&l(2,r=S.countCharacters)},n.$$.update=()=>{n.$$.dirty&8&&l(5,t=u==="r"?"url":"word")},[o,i,r,u,f,t,c,s,a,d,h,g,A]}class Kl extends he{constructor(e){super(),ve(this,e,Wl,Jl,ge,{res:0,parent:1,onFormSubmit:7,tag:8,countCharacters:2})}}function dt(n,e,l){const t=n.slice();return t[15]=e[l],t[25]=l,t}function _t(n){let e,l,t,o,i,s=n[0].buttonTextCancel+"",a,r,u,f,c;return l=new il({props:{autocollapse:!0,$$slots:{default:[pn]},$$scope:{ctx:n}}}),{c(){e=C("div"),ae(l.$$.fragment),t=j(),o=C("footer"),i=C("button"),a=D(s),this.h()},l(d){e=P(d,"DIV",{class:!0});var h=U(e);re(l.$$.fragment,h),t=V(h),o=P(h,"FOOTER",{class:!0});var g=U(o);i=P(g,"BUTTON",{class:!0});var A=U(i);a=B(A,s),A.forEach(m),g.forEach(m),h.forEach(m),this.h()},h(){v(i,"class",r="btn "+n[0].buttonNeutral),v(o,"class","flex justify-end mt-2 mr-5"),v(e,"class","modal-example-form "+vn)},m(d,h){N(d,e,h),ue(l,e,null),w(e,t),w(e,o),w(o,i),w(i,a),u=!0,f||(c=G(i,"click",function(){Mt(n[0].onClose)&&n[0].onClose.apply(this,arguments)}),f=!0)},p(d,h){n=d;const g={};h&67108927&&(g.$$scope={dirty:h,ctx:n}),l.$set(g),(!u||h&1)&&s!==(s=n[0].buttonTextCancel+"")&&Q(a,s),(!u||h&1&&r!==(r="btn "+n[0].buttonNeutral))&&v(i,"class",r)},i(d){u||(z(l.$$.fragment,d),u=!0)},o(d){q(l.$$.fragment,d),u=!1},d(d){d&&m(e),fe(l),f=!1,c()}}}function Gl(n){let e;return{c(){e=D("🗒")},l(l){e=B(l,"🗒")},m(l,t){N(l,e,t)},d(l){l&&m(e)}}}function Xl(n){let e=n[5]("modal.addNote.edit")+"",l;return{c(){l=D(e)},l(t){l=B(t,e)},m(t,o){N(t,l,o)},p(t,o){o&32&&e!==(e=t[5]("modal.addNote.edit")+"")&&Q(l,e)},d(t){t&&m(l)}}}function Yl(n){let e=n[5]("ModalAddNote.add_note")+"",l;return{c(){l=D(e)},l(t){l=B(t,e)},m(t,o){N(t,l,o)},p(t,o){o&32&&e!==(e=t[5]("ModalAddNote.add_note")+"")&&Q(l,e)},d(t){t&&m(l)}}}function Zl(n){let e;function l(i,s){return i[4][0].value.type==="add"?Yl:Xl}let t=l(n),o=t(n);return{c(){o.c(),e=se()},l(i){o.l(i),e=se()},m(i,s){o.m(i,s),N(i,e,s)},p(i,s){t===(t=l(i))&&o?o.p(i,s):(o.d(1),o=t(i),o&&(o.c(),o.m(e.parentNode,e)))},d(i){i&&m(e),o.d(i)}}}function Ql(n){return{c:X,l:X,m:X,p:X,d:X}}function $l(n){let e,l=n[5]("ModalAddNote.add_note_to1")+"",t,o=(n[4][0].title??"(title missing)")+"",i,s=n[5]("ModalAddNote.add_note_to2")+"",a;return{c(){e=D("🗒 "),t=D(l),i=D(o),a=D(s)},l(r){e=B(r,"🗒 "),t=B(r,l),i=B(r,o),a=B(r,s)},m(r,u){N(r,e,u),N(r,t,u),N(r,i,u),N(r,a,u)},p(r,u){u&32&&l!==(l=r[5]("ModalAddNote.add_note_to1")+"")&&Q(t,l),u&16&&o!==(o=(r[4][0].title??"(title missing)")+"")&&Q(i,o),u&32&&s!==(s=r[5]("ModalAddNote.add_note_to2")+"")&&Q(a,s)},d(r){r&&(m(e),m(t),m(i),m(a))}}}function mt(n){let e,l;return e=new ql({props:{res:n[3],parent:n[0],onFormSubmit:n[12],tag:n[4][0].value.tag}}),{c(){ae(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,o){ue(e,t,o),l=!0},p(t,o){const i={};o&8&&(i.res=t[3]),o&1&&(i.parent=t[0]),o&16&&(i.tag=t[4][0].value.tag),e.$set(i)},i(t){l||(z(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){fe(e,t)}}}function xl(n){let e,l;return e=new Fl({props:{res:n[3],parent:n[0],onFormSubmit:n[12]}}),{c(){ae(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,o){ue(e,t,o),l=!0},p(t,o){const i={};o&8&&(i.res=t[3]),o&1&&(i.parent=t[0]),e.$set(i)},i(t){l||(z(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){fe(e,t)}}}function en(n){let e,l;return e=new Ol({props:{res:n[3],parent:n[0],onFormSubmit:n[12]}}),{c(){ae(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,o){ue(e,t,o),l=!0},p(t,o){const i={};o&8&&(i.res=t[3]),o&1&&(i.parent=t[0]),e.$set(i)},i(t){l||(z(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){fe(e,t)}}}function tn(n){let e,l;return e=new Nl({props:{res:n[3],parent:n[0],onFormSubmit:n[12]}}),{c(){ae(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,o){ue(e,t,o),l=!0},p(t,o){const i={};o&8&&(i.res=t[3]),o&1&&(i.parent=t[0]),e.$set(i)},i(t){l||(z(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){fe(e,t)}}}function ln(n){let e,l;return e=new Cl({props:{res:n[3],parent:n[0],onFormSubmit:n[12]}}),{c(){ae(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,o){ue(e,t,o),l=!0},p(t,o){const i={};o&8&&(i.res=t[3]),o&1&&(i.parent=t[0]),e.$set(i)},i(t){l||(z(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){fe(e,t)}}}function nn(n){let e,l;return e=new Ul({props:{res:n[3],parent:n[0],onFormSubmit:n[12],tag:n[4][0].value.tag}}),{c(){ae(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,o){ue(e,t,o),l=!0},p(t,o){const i={};o&8&&(i.res=t[3]),o&1&&(i.parent=t[0]),o&16&&(i.tag=t[4][0].value.tag),e.$set(i)},i(t){l||(z(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){fe(e,t)}}}function on(n){let e,l;return e=new jl({props:{res:n[3],parent:n[0],onFormSubmit:n[12],tag:n[4][0].value.tag,number:n[4][0].value.number,viewList:n[4][0].value.viewList}}),{c(){ae(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,o){ue(e,t,o),l=!0},p(t,o){const i={};o&8&&(i.res=t[3]),o&1&&(i.parent=t[0]),o&16&&(i.tag=t[4][0].value.tag),o&16&&(i.number=t[4][0].value.number),o&16&&(i.viewList=t[4][0].value.viewList),e.$set(i)},i(t){l||(z(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){fe(e,t)}}}function bt(n){let e,l;return e=new Kl({props:{res:n[3],parent:n[0],onFormSubmit:n[12],tag:n[4][0].value.tag,countCharacters:n[11]}}),{c(){ae(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,o){ue(e,t,o),l=!0},p(t,o){const i={};o&8&&(i.res=t[3]),o&1&&(i.parent=t[0]),o&16&&(i.tag=t[4][0].value.tag),e.$set(i)},i(t){l||(z(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){fe(e,t)}}}function sn(n){let e,l,t,o,i,s,a,r,u,f,c;function d(_,k){return _[4][0].value.type==="add"?$l:Ql}let h=d(n),g=h(n),A=n[4][0].value.kind===10002&&mt(n);const S=[tn,en,xl],b=[];function p(_,k){return _[15]===void 0&&_[6]&&_[7]||_[15]!==void 0&&(_[15][0]==="a"||_[15][0]==="e")?0:_[15]===void 0&&_[7]||_[15]!==void 0&&_[15][0]==="e"?1:_[15]===void 0&&_[6]||_[15]!==void 0&&_[15][0]==="a"?2:-1}~(i=p(n))&&(s=b[i]=S[i](n));let E=(n[15]===void 0&&n[8]||n[15]!==void 0&&n[15][0]==="p")&&ln(n),F=(n[15]===void 0&&n[10]||n[15]!==void 0&&n[15][0]==="emoji")&&nn(n),L=(n[15]===void 0&&n[9]||n[15]!==void 0&&n[15][0]==="relay")&&on(n),I=n[4][0].value.kind!==10002&&(n[15]===void 0&&n[11].length>0||n[15]!==void 0&&(n[15][0]==="r"||n[15][0]==="t"||n[15][0]==="word"))&&bt(n);return{c(){e=C("div"),l=C("header"),g.c(),t=j(),A&&A.c(),o=j(),s&&s.c(),a=j(),E&&E.c(),r=j(),F&&F.c(),u=j(),L&&L.c(),f=j(),I&&I.c(),this.h()},l(_){e=P(_,"DIV",{class:!0});var k=U(e);l=P(k,"HEADER",{class:!0});var O=U(l);g.l(O),O.forEach(m),t=V(k),A&&A.l(k),o=V(k),s&&s.l(k),a=V(k),E&&E.l(k),r=V(k),F&&F.l(k),u=V(k),L&&L.l(k),f=V(k),I&&I.l(k),k.forEach(m),this.h()},h(){v(l,"class",Ze),v(e,"class","card p-4")},m(_,k){N(_,e,k),w(e,l),g.m(l,null),w(e,t),A&&A.m(e,null),w(e,o),~i&&b[i].m(e,null),w(e,a),E&&E.m(e,null),w(e,r),F&&F.m(e,null),w(e,u),L&&L.m(e,null),w(e,f),I&&I.m(e,null),c=!0},p(_,k){h===(h=d(_))&&g?g.p(_,k):(g.d(1),g=h(_),g&&(g.c(),g.m(l,null))),_[4][0].value.kind===10002?A?(A.p(_,k),k&16&&z(A,1)):(A=mt(_),A.c(),z(A,1),A.m(e,o)):A&&(me(),q(A,1,1,()=>{A=null}),be()),s&&s.p(_,k),(_[15]===void 0&&_[8]||_[15]!==void 0&&_[15][0]==="p")&&E.p(_,k),(_[15]===void 0&&_[10]||_[15]!==void 0&&_[15][0]==="emoji")&&F.p(_,k),(_[15]===void 0&&_[9]||_[15]!==void 0&&_[15][0]==="relay")&&L.p(_,k),_[4][0].value.kind!==10002&&(_[15]===void 0&&_[11].length>0||_[15]!==void 0&&(_[15][0]==="r"||_[15][0]==="t"||_[15][0]==="word"))?I?(I.p(_,k),k&16&&z(I,1)):(I=bt(_),I.c(),z(I,1),I.m(e,null)):I&&(me(),q(I,1,1,()=>{I=null}),be())},i(_){c||(z(A),z(s),z(E),z(F),z(L),z(I),c=!0)},o(_){q(A),q(s),q(E),q(F),q(L),q(I),c=!1},d(_){_&&m(e),g.d(),A&&A.d(),~i&&b[i].d(),E&&E.d(),F&&F.d(),L&&L.d(),I&&I.d()}}}function an(n){let e;return{c(){e=D("🗒")},l(l){e=B(l,"🗒")},m(l,t){N(l,e,t)},d(l){l&&m(e)}}}function rn(n){let e=n[5]("modal.addNote.edit")+"",l,t,o=n[5]("ModalAddNote.add_note_tag")+"",i;return{c(){l=D(e),t=j(),i=D(o)},l(s){l=B(s,e),t=V(s),i=B(s,o)},m(s,a){N(s,l,a),N(s,t,a),N(s,i,a)},p(s,a){a&32&&e!==(e=s[5]("modal.addNote.edit")+"")&&Q(l,e),a&32&&o!==(o=s[5]("ModalAddNote.add_note_tag")+"")&&Q(i,o)},d(s){s&&(m(l),m(t),m(i))}}}function un(n){let e=n[5]("ModalAddNote.add_note")+"",l,t,o=n[5]("ModalAddNote.add_note_tag")+"",i;return{c(){l=D(e),t=j(),i=D(o)},l(s){l=B(s,e),t=V(s),i=B(s,o)},m(s,a){N(s,l,a),N(s,t,a),N(s,i,a)},p(s,a){a&32&&e!==(e=s[5]("ModalAddNote.add_note")+"")&&Q(l,e),a&32&&o!==(o=s[5]("ModalAddNote.add_note_tag")+"")&&Q(i,o)},d(s){s&&(m(l),m(t),m(i))}}}function fn(n){let e;function l(i,s){return i[4][0].value.type==="add"?un:rn}let t=l(n),o=t(n);return{c(){o.c(),e=se()},l(i){o.l(i),e=se()},m(i,s){o.m(i,s),N(i,e,s)},p(i,s){t===(t=l(i))&&o?o.p(i,s):(o.d(1),o=t(i),o&&(o.c(),o.m(e.parentNode,e)))},d(i){i&&m(e),o.d(i)}}}function cn(n){return{c:X,l:X,m:X,p:X,d:X}}function dn(n){let e,l=n[5]("ModalAddNote.add_note_to1")+"",t,o=(n[4][0].title??"(title missing)")+"",i,s=n[5]("ModalAddNote.add_note_to2")+"",a,r,u=n[5]("ModalAddNote.add_note_tag")+"",f;return{c(){e=D("🗒 "),t=D(l),i=D(o),a=D(s),r=j(),f=D(u)},l(c){e=B(c,"🗒 "),t=B(c,l),i=B(c,o),a=B(c,s),r=V(c),f=B(c,u)},m(c,d){N(c,e,d),N(c,t,d),N(c,i,d),N(c,a,d),N(c,r,d),N(c,f,d)},p(c,d){d&32&&l!==(l=c[5]("ModalAddNote.add_note_to1")+"")&&Q(t,l),d&16&&o!==(o=(c[4][0].title??"(title missing)")+"")&&Q(i,o),d&32&&s!==(s=c[5]("ModalAddNote.add_note_to2")+"")&&Q(a,s),d&32&&u!==(u=c[5]("ModalAddNote.add_note_tag")+"")&&Q(f,u)},d(c){c&&(m(e),m(t),m(i),m(a),m(r),m(f))}}}function gt(n){let e=n[15]+"",l,t;return{c(){l=D(e),t=D(",")},l(o){l=B(o,e),t=B(o,",")},m(o,i){N(o,l,i),N(o,t,i)},p(o,i){i&16&&e!==(e=o[15]+"")&&Q(l,e)},d(o){o&&(m(l),m(t))}}}function _n(n){let e,l,t,o,i,s,a,r,u,f,c,d,h,g,A,S,b,p;function E(k,O){return k[4][0].value.type==="add"?dn:cn}let F=E(n),L=F(n),I=Ee(Ne[n[4][0].value.kind]),_=[];for(let k=0;k<I.length;k+=1)_[k]=gt(dt(n,I,k));return{c(){e=C("div"),l=C("header"),L.c(),t=j(),o=C("article"),i=D(`valid tag:\r
							`);for(let k=0;k<_.length;k+=1)_[k].c();s=j(),a=C("input"),r=j(),u=C("footer"),f=C("button"),c=D("Private"),h=j(),g=C("button"),A=D("Public"),this.h()},l(k){e=P(k,"DIV",{class:!0});var O=U(e);l=P(O,"HEADER",{class:!0});var y=U(l);L.l(y),y.forEach(m),t=V(O),o=P(O,"ARTICLE",{class:!0});var M=U(o);i=B(M,`valid tag:\r
							`);for(let ie=0;ie<_.length;ie+=1)_[ie].l(M);M.forEach(m),s=V(O),a=P(O,"INPUT",{class:!0,type:!0,placeholder:!0}),r=V(O),u=P(O,"FOOTER",{class:!0});var R=U(u);f=P(R,"BUTTON",{class:!0});var W=U(f);c=B(W,"Private"),W.forEach(m),h=V(R),g=P(R,"BUTTON",{class:!0});var $=U(g);A=B($,"Public"),$.forEach(m),R.forEach(m),O.forEach(m),this.h()},h(){v(l,"class",Ze),v(o,"class","body break-all"),v(a,"class","input p-2 m-2"),v(a,"type","text"),v(a,"placeholder","[”e”,”1234”]"),v(f,"class",d="btn variant-filled-warning "+n[0].buttonPositive),v(g,"class",S="btn "+n[0].buttonPositive),v(u,"class","rid grid-cols-3 gap-2 flex justify-end mt-2"),v(e,"class","card p-4")},m(k,O){N(k,e,O),w(e,l),L.m(l,null),w(e,t),w(e,o),w(o,i);for(let y=0;y<_.length;y+=1)_[y]&&_[y].m(o,null);w(e,s),w(e,a),ee(a,n[1]),w(e,r),w(e,u),w(u,f),w(f,c),w(u,h),w(u,g),w(g,A),b||(p=[G(a,"input",n[16]),G(f,"click",n[17]),G(g,"click",n[18])],b=!0)},p(k,O){if(F===(F=E(k))&&L?L.p(k,O):(L.d(1),L=F(k),L&&(L.c(),L.m(l,null))),O&16){I=Ee(Ne[k[4][0].value.kind]);let y;for(y=0;y<I.length;y+=1){const M=dt(k,I,y);_[y]?_[y].p(M,O):(_[y]=gt(M),_[y].c(),_[y].m(o,null))}for(;y<_.length;y+=1)_[y].d(1);_.length=I.length}O&2&&a.value!==k[1]&&ee(a,k[1]),O&1&&d!==(d="btn variant-filled-warning "+k[0].buttonPositive)&&v(f,"class",d),O&1&&S!==(S="btn "+k[0].buttonPositive)&&v(g,"class",S)},d(k){k&&m(e),L.d(),Ye(_,k),b=!1,pe(p)}}}function pt(n){let e,l;return e=new Ge({props:{$$slots:{content:[gn],summary:[bn],lead:[mn]},$$scope:{ctx:n}}}),{c(){ae(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,o){ue(e,t,o),l=!0},p(t,o){const i={};o&67108925&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){l||(z(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){fe(e,t)}}}function mn(n){let e;return{c(){e=D("🖊")},l(l){e=B(l,"🖊")},m(l,t){N(l,e,t)},d(l){l&&m(e)}}}function bn(n){let e=n[5]("ModalAddNote.create")+"",l;return{c(){l=D(e)},l(t){l=B(t,e)},m(t,o){N(t,l,o)},p(t,o){o&32&&e!==(e=t[5]("ModalAddNote.create")+"")&&Q(l,e)},d(t){t&&m(l)}}}function gn(n){let e,l,t,o=n[5]("ModalAddNote.create_to1")+"",i,s=(n[4][0].title??"(title missing)")+"",a,r=n[5]("ModalAddNote.create_to2")+"",u,f,c,d=n[5]("ModalAddNote.create_body")+"",h,g,A,S,b,p,E,F,L,I,_,k,O,y;return{c(){e=C("div"),l=C("header"),t=D("🖊 "),i=D(o),a=D(s),u=D(r),f=j(),c=C("article"),h=D(d),g=j(),A=C("textarea"),S=j(),b=C("footer"),p=C("button"),E=D("Private"),L=j(),I=C("button"),_=D("Public"),this.h()},l(M){e=P(M,"DIV",{class:!0});var R=U(e);l=P(R,"HEADER",{class:!0});var W=U(l);t=B(W,"🖊 "),i=B(W,o),a=B(W,s),u=B(W,r),W.forEach(m),f=V(R),c=P(R,"ARTICLE",{class:!0});var $=U(c);h=B($,d),$.forEach(m),g=V(R),A=P(R,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),U(A).forEach(m),S=V(R),b=P(R,"FOOTER",{class:!0});var ie=U(b);p=P(ie,"BUTTON",{class:!0});var de=U(p);E=B(de,"Private"),de.forEach(m),L=V(ie),I=P(ie,"BUTTON",{class:!0});var Y=U(I);_=B(Y,"Public"),Y.forEach(m),ie.forEach(m),R.forEach(m),this.h()},h(){v(l,"class",Ze),v(c,"class","body"),v(A,"class","textarea p-2 m-2"),v(A,"rows","4"),v(A,"placeholder","memo..."),v(p,"class",F="btn variant-filled-warning "+n[0].buttonPositive),v(I,"class",k="btn "+n[0].buttonPositive),v(b,"class","rid grid-cols-3 gap-2 flex justify-end mt-2"),v(e,"class","card p-4")},m(M,R){N(M,e,R),w(e,l),w(l,t),w(l,i),w(l,a),w(l,u),w(e,f),w(e,c),w(c,h),w(e,g),w(e,A),ee(A,n[2]),w(e,S),w(e,b),w(b,p),w(p,E),w(b,L),w(b,I),w(I,_),O||(y=[G(A,"input",n[19]),G(p,"click",n[20]),G(I,"click",n[21])],O=!0)},p(M,R){R&32&&o!==(o=M[5]("ModalAddNote.create_to1")+"")&&Q(i,o),R&16&&s!==(s=(M[4][0].title??"(title missing)")+"")&&Q(a,s),R&32&&r!==(r=M[5]("ModalAddNote.create_to2")+"")&&Q(u,r),R&32&&d!==(d=M[5]("ModalAddNote.create_body")+"")&&Q(h,d),R&4&&ee(A,M[2]),R&1&&F!==(F="btn variant-filled-warning "+M[0].buttonPositive)&&v(p,"class",F),R&1&&k!==(k="btn "+M[0].buttonPositive)&&v(I,"class",k)},d(M){M&&m(e),O=!1,pe(y)}}}function pn(n){let e,l,t,o,i,s;e=new Ge({props:{open:!0,$$slots:{content:[sn],summary:[Zl],lead:[Gl]},$$scope:{ctx:n}}}),t=new Ge({props:{$$slots:{content:[_n],summary:[fn],lead:[an]},$$scope:{ctx:n}}});let a=(n[4][0].value.kind===30003||n[4][0].value.kind===10003)&&pt(n);return{c(){ae(e.$$.fragment),l=j(),ae(t.$$.fragment),o=j(),a&&a.c(),i=se()},l(r){re(e.$$.fragment,r),l=V(r),re(t.$$.fragment,r),o=V(r),a&&a.l(r),i=se()},m(r,u){ue(e,r,u),N(r,l,u),ue(t,r,u),N(r,o,u),a&&a.m(r,u),N(r,i,u),s=!0},p(r,u){const f={};u&67108921&&(f.$$scope={dirty:u,ctx:r}),e.$set(f);const c={};u&67108923&&(c.$$scope={dirty:u,ctx:r}),t.$set(c),r[4][0].value.kind===30003||r[4][0].value.kind===10003?a?(a.p(r,u),u&16&&z(a,1)):(a=pt(r),a.c(),z(a,1),a.m(i.parentNode,i)):a&&(me(),q(a,1,1,()=>{a=null}),be())},i(r){s||(z(e.$$.fragment,r),z(t.$$.fragment,r),z(a),s=!0)},o(r){q(e.$$.fragment,r),q(t.$$.fragment,r),q(a),s=!1},d(r){r&&(m(l),m(o),m(i)),fe(e,r),fe(t,r),a&&a.d(r)}}}function hn(n){let e,l,t=n[4][0]&&_t(n);return{c(){t&&t.c(),e=se()},l(o){t&&t.l(o),e=se()},m(o,i){t&&t.m(o,i),N(o,e,i),l=!0},p(o,[i]){o[4][0]?t?(t.p(o,i),i&16&&z(t,1)):(t=_t(o),t.c(),z(t,1),t.m(e.parentNode,e)):t&&(me(),q(t,1,1,()=>{t=null}),be())},i(o){l||(z(t),l=!0)},o(o){q(t),l=!1},d(o){o&&m(e),t&&t.d(o)}}}const vn="card p-4 w-modal shadow-xl space-y-4",Ze="text-2xl font-bold";function kn(n,e,l){var M,R,W,$,ie,de;let t,o,i;ne(n,ye,Y=>l(4,t=Y)),ne(n,Be,Y=>l(22,o=Y)),ne(n,Re,Y=>l(5,i=Y));let{parent:s}=e,a=(R=(M=t[0])==null?void 0:M.value)!=null&&R.tag?JSON.stringify(($=(W=t[0])==null?void 0:W.value)==null?void 0:$.tag):"",r;const u={btn:"pub",tag:[],check:!1};let f=(de=(ie=t[0])==null?void 0:ie.value)==null?void 0:de.tag;const c=Ne[t[0].value.kind].includes("a"),d=Ne[t[0].value.kind].includes("e"),h=Ne[t[0].value.kind].includes("p"),g=Ne[t[0].value.kind].includes("relay"),A=Ne[t[0].value.kind].includes("emoji"),S=["t","word","r"],b=Ne[t[0].value.kind].filter(Y=>S.some(ke=>Y.includes(ke)));console.log(b);function p(){console.log(u),t[0].response&&t[0].response(u),ye.close()}function E(){try{const Y=JSON.parse(a);if(!sl(Y))throw new Error;if(!Y||!Ne[t[0].value.kind].includes(Y[0]))throw new Error;l(3,u.tag=Y,u),p()}catch{const ke={message:i("toast.invalidtag"),timeout:3e3,background:"bg-orange-500 text-white width-filled "};oe.trigger(ke);return}}async function F(){const Y={id:"",pubkey:t[0].value.pubkey,created_at:Math.floor(Date.now()/1e3),kind:1,tags:[],content:r,sig:""};if(console.log(o[t[0].value.pubkey].postRelays),o[t[0].value.pubkey].postRelays.length>0){const ke=await je(Y,o[t[0].value.pubkey].postRelays);if(ke.isSuccess){const He={message:ke.msg,timeout:3e3};if(oe.trigger(He),ke.event)l(3,u.tag=["e",ke.event.id],u),p();else{const Le={message:"failed to publish",timeout:3e3,background:"bg-orange-500 text-white width-filled "};oe.trigger(Le);return}}}}function L(){a=this.value,l(1,a)}const I=()=>{l(3,u.btn="prv",u),E()},_=()=>{l(3,u.btn="pub",u),E()};function k(){r=this.value,l(2,r)}const O=()=>{r!=""&&(l(3,u.btn="prv",u),F())},y=()=>{r!=""&&(l(3,u.btn="pub",u),F())};return n.$$set=Y=>{"parent"in Y&&l(0,s=Y.parent)},[s,a,r,u,t,i,c,d,h,g,A,b,p,E,F,f,L,I,_,k,O,y]}class wn extends he{constructor(e){super(),ve(this,e,kn,hn,ge,{parent:0})}}function ht(n,e,l){const t=n.slice();return t[14]=e[l],t[16]=l,t}function vt(n){let e,l,t=(n[1][0].title??"(title missing)")+"",o,i,s,a=(n[1][0].body??"(body missing)")+"",r,u,f,c,d,h,g=n[0].buttonTextCancel+"",A,S,b,p,E,F,L,I;f=new Rt({props:{class:"border border-surface-500 p-4 rounded-container-token max-h-56 overflow-auto",$$slots:{default:[En]},$$scope:{ctx:n}}});let _=(n[3]!==n[1][0].value.tag||n[1][0].value.bkm!=="prv")&&yt(n),k=(n[3]!==n[1][0].value.tag||n[1][0].value.bkm!=="pub")&&Et(n);return{c(){e=C("div"),l=C("header"),o=D(t),i=j(),s=C("article"),r=D(a),u=j(),ae(f.$$.fragment),c=j(),d=C("footer"),h=C("button"),A=D(g),b=j(),_&&_.c(),p=j(),k&&k.c(),this.h()},l(O){e=P(O,"DIV",{class:!0});var y=U(e);l=P(y,"HEADER",{class:!0});var M=U(l);o=B(M,t),M.forEach(m),i=V(y),s=P(y,"ARTICLE",{});var R=U(s);r=B(R,a),R.forEach(m),u=V(y),re(f.$$.fragment,y),c=V(y),d=P(y,"FOOTER",{class:!0});var W=U(d);h=P(W,"BUTTON",{class:!0});var $=U(h);A=B($,g),$.forEach(m),b=V(W),_&&_.l(W),p=V(W),k&&k.l(W),W.forEach(m),y.forEach(m),this.h()},h(){v(l,"class",An),v(h,"class",S="btn "+n[0].buttonNeutral),v(d,"class",E="modal-footer "+n[0].regionFooter),v(e,"class","modal-example-form "+Tn)},m(O,y){N(O,e,y),w(e,l),w(l,o),w(e,i),w(e,s),w(s,r),w(e,u),ue(f,e,null),w(e,c),w(e,d),w(d,h),w(h,A),w(d,b),_&&_.m(d,null),w(d,p),k&&k.m(d,null),F=!0,L||(I=G(h,"click",function(){Mt(n[0].onClose)&&n[0].onClose.apply(this,arguments)}),L=!0)},p(O,y){n=O,(!F||y&2)&&t!==(t=(n[1][0].title??"(title missing)")+"")&&Q(o,t),(!F||y&2)&&a!==(a=(n[1][0].body??"(body missing)")+"")&&Q(r,a);const M={};y&131320&&(M.$$scope={dirty:y,ctx:n}),f.$set(M),(!F||y&1)&&g!==(g=n[0].buttonTextCancel+"")&&Q(A,g),(!F||y&1&&S!==(S="btn "+n[0].buttonNeutral))&&v(h,"class",S),n[3]!==n[1][0].value.tag||n[1][0].value.bkm!=="prv"?_?_.p(n,y):(_=yt(n),_.c(),_.m(d,p)):_&&(_.d(1),_=null),n[3]!==n[1][0].value.tag||n[1][0].value.bkm!=="pub"?k?k.p(n,y):(k=Et(n),k.c(),k.m(d,null)):k&&(k.d(1),k=null),(!F||y&1&&E!==(E="modal-footer "+n[0].regionFooter))&&v(d,"class",E)},i(O){F||(z(f.$$.fragment,O),F=!0)},o(O){q(f.$$.fragment,O),F=!1},d(O){O&&m(e),fe(f),_&&_.d(),k&&k.d(),L=!1,I()}}}function kt(n){let e,l,t=Ee(n[7]),o=[];for(let s=0;s<t.length;s+=1)o[s]=wt(ht(n,t,s));const i=s=>q(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=se()},l(s){for(let a=0;a<o.length;a+=1)o[a].l(s);e=se()},m(s,a){for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(s,a);N(s,e,a),l=!0},p(s,a){if(a&760){t=Ee(s[7]);let r;for(r=0;r<t.length;r+=1){const u=ht(s,t,r);o[r]?(o[r].p(u,a),z(o[r],1)):(o[r]=wt(u),o[r].c(),z(o[r],1),o[r].m(e.parentNode,e))}for(me(),r=t.length;r<o.length;r+=1)i(r);be()}},i(s){if(!l){for(let a=0;a<t.length;a+=1)z(o[a]);l=!0}},o(s){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)q(o[a]);l=!1},d(s){s&&m(e),Ye(o,s)}}}function yn(n){var s,a,r;let e=((s=n[6][n[5]][n[4]].get(n[14]))==null?void 0:s.identifier)+"",l,t,o=(a=n[6][n[5]][n[4]].get(n[14]))!=null&&a.title?`【${(r=n[6][n[5]][n[4]].get(n[14]))==null?void 0:r.title}】`:"",i;return{c(){l=D(e),t=j(),i=D(o)},l(u){l=B(u,e),t=V(u),i=B(u,o)},m(u,f){N(u,l,f),N(u,t,f),N(u,i,f)},p(u,f){var c,d,h;f&240&&e!==(e=((c=u[6][u[5]][u[4]].get(u[14]))==null?void 0:c.identifier)+"")&&Q(l,e),f&240&&o!==(o=(d=u[6][u[5]][u[4]].get(u[14]))!=null&&d.title?`【${(h=u[6][u[5]][u[4]].get(u[14]))==null?void 0:h.title}】`:"")&&Q(i,o)},d(u){u&&(m(l),m(t),m(i))}}}function wt(n){var r;let e,l,t,o;function i(u){n[10](u)}function s(){return n[11](n[14])}let a={name:((r=n[6][n[5]][n[4]].get(n[14]))==null?void 0:r.identifier)??"",value:n[16],class:"truncate",$$slots:{default:[yn]},$$scope:{ctx:n}};return n[3]!==void 0&&(a.group=n[3]),e=new Lt({props:a}),Pe.push(()=>Oe(e,"group",i)),e.$on("change",s),{c(){ae(e.$$.fragment),t=j()},l(u){re(e.$$.fragment,u),t=V(u)},m(u,f){ue(e,u,f),N(u,t,f),o=!0},p(u,f){var d;n=u;const c={};f&240&&(c.name=((d=n[6][n[5]][n[4]].get(n[14]))==null?void 0:d.identifier)??""),f&131312&&(c.$$scope={dirty:f,ctx:n}),!l&&f&8&&(l=!0,c.group=n[3],Se(()=>l=!1)),e.$set(c)},i(u){o||(z(e.$$.fragment,u),o=!0)},o(u){q(e.$$.fragment,u),o=!1},d(u){u&&m(t),fe(e,u)}}}function En(n){let e,l,t=n[6][n[5]][n[4]].size>0&&kt(n);return{c(){t&&t.c(),e=se()},l(o){t&&t.l(o),e=se()},m(o,i){t&&t.m(o,i),N(o,e,i),l=!0},p(o,i){o[6][o[5]][o[4]].size>0?t?(t.p(o,i),i&112&&z(t,1)):(t=kt(o),t.c(),z(t,1),t.m(e.parentNode,e)):t&&(me(),q(t,1,1,()=>{t=null}),be())},i(o){l||(z(t),l=!0)},o(o){q(t),l=!1},d(o){o&&m(e),t&&t.d(o)}}}function yt(n){let e,l="Private",t,o;return{c(){e=C("button"),e.textContent=l,this.h()},l(i){e=P(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Te(e)!=="svelte-hz6vm9"&&(e.textContent=l),this.h()},h(){v(e,"class","btn variant-filled-warning")},m(i,s){N(i,e,s),t||(o=G(e,"click",n[12]),t=!0)},p:X,d(i){i&&m(e),t=!1,o()}}}function Et(n){let e,l="Public",t,o;return{c(){e=C("button"),e.textContent=l,this.h()},l(i){e=P(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Te(e)!=="svelte-1qroz4e"&&(e.textContent=l),this.h()},h(){v(e,"class","btn variant-filled-primary")},m(i,s){N(i,e,s),t||(o=G(e,"click",n[13]),t=!0)},p:X,d(i){i&&m(e),t=!1,o()}}}function Nn(n){let e,l,t=n[1][0]&&vt(n);return{c(){t&&t.c(),e=se()},l(o){t&&t.l(o),e=se()},m(o,i){t&&t.m(o,i),N(o,e,i),l=!0},p(o,[i]){o[1][0]?t?(t.p(o,i),i&2&&z(t,1)):(t=vt(o),t.c(),z(t,1),t.m(e.parentNode,e)):t&&(me(),q(t,1,1,()=>{t=null}),be())},i(o){l||(z(t),l=!0)},o(o){q(t),l=!1},d(o){o&&m(e),t&&t.d(o)}}}const Tn="card p-4 w-modal shadow-xl space-y-4 break-all",An="text-2xl font-bold";function Cn(n,e,l){let t,o,i,s,a;ne(n,ye,b=>l(1,i=b)),ne(n,Ut,b=>l(6,s=b)),ne(n,Xe,b=>l(7,a=b));let{parent:r}=e,u={tag:0,bkm:""},f=0;function c(){l(2,u.tag=f,u),console.log(f),i[0].response&&i[0].response(u),console.log(u),ye.close()}function d(b){console.log(b),console.log(f)}function h(b){f=b,l(3,f)}const g=b=>{var p;return d(((p=s[t][o].get(b))==null?void 0:p.identifier)??"")},A=()=>{l(2,u.bkm="prv",u),c()},S=()=>{l(2,u.bkm="pub",u),c()};return n.$$set=b=>{"parent"in b&&l(0,r=b.parent)},n.$$.update=()=>{var b,p,E,F;n.$$.dirty&2&&l(5,t=(p=(b=i[0])==null?void 0:b.value)==null?void 0:p.pubkey),n.$$.dirty&2&&l(4,o=(F=(E=i[0])==null?void 0:E.value)==null?void 0:F.kind)},[r,i,u,f,o,t,s,a,c,d,h,g,A,S]}class Pn extends he{constructor(e){super(),ve(this,e,Cn,Nn,ge,{parent:0})}}function Nt(n,e,l){const t=n.slice();return t[49]=e[l],t[51]=l,t}function Tt(n){var o;let e,l,t=n[7]&&n[7][n[1]]&&((o=n[7][n[1]][n[2]])==null?void 0:o.size)>0&&At(n);return{c(){e=C("div"),t&&t.c(),this.h()},l(i){e=P(i,"DIV",{class:!0});var s=U(e);t&&t.l(s),s.forEach(m),this.h()},h(){v(e,"class","hidden md:flex h-full w-[12em] pb-[6em] bg-surface-200-700-token overflow-y-auto fixed")},m(i,s){N(i,e,s),t&&t.m(e,null),l=!0},p(i,s){var a;i[7]&&i[7][i[1]]&&((a=i[7][i[1]][i[2]])==null?void 0:a.size)>0?t?(t.p(i,s),s[0]&134&&z(t,1)):(t=At(i),t.c(),z(t,1),t.m(e,null)):t&&(me(),q(t,1,1,()=>{t=null}),be())},i(i){l||(z(t),l=!0)},o(i){q(t),l=!1},d(i){i&&m(e),t&&t.d()}}}function At(n){let e,l;return e=new Rt({props:{class:" overflow-y-auto w-full",active:"variant-ghost-primary box-border",$$slots:{default:[Fn]},$$scope:{ctx:n}}}),{c(){ae(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,o){ue(e,t,o),l=!0},p(t,o){const i={};o[0]&16774|o[1]&2097152&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){l||(z(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){fe(e,t)}}}function Sn(n){var t;let e=((t=n[7][n[1]][n[2]].get(n[49]))==null?void 0:t.identifier)+"",l;return{c(){l=D(e)},l(o){l=B(o,e)},m(o,i){N(o,l,i)},p(o,i){var s;i[0]&16518&&e!==(e=((s=o[7][o[1]][o[2]].get(o[49]))==null?void 0:s.identifier)+"")&&Q(l,e)},d(o){o&&m(l)}}}function On(n){var r,u;let e,l=((r=n[7][n[1]][n[2]].get(n[49]))==null?void 0:r.identifier)+"",t,o,i,s=((u=n[7][n[1]][n[2]].get(n[49]))==null?void 0:u.title)+"",a;return{c(){e=C("div"),t=D(l),o=j(),i=C("div"),a=D(s),this.h()},l(f){e=P(f,"DIV",{class:!0});var c=U(e);t=B(c,l),c.forEach(m),o=V(f),i=P(f,"DIV",{});var d=U(i);a=B(d,s),d.forEach(m),this.h()},h(){v(e,"class","text-xs")},m(f,c){N(f,e,c),w(e,t),N(f,o,c),N(f,i,c),w(i,a)},p(f,c){var d,h;c[0]&16518&&l!==(l=((d=f[7][f[1]][f[2]].get(f[49]))==null?void 0:d.identifier)+"")&&Q(t,l),c[0]&16518&&s!==(s=((h=f[7][f[1]][f[2]].get(f[49]))==null?void 0:h.title)+"")&&Q(a,s)},d(f){f&&(m(e),m(o),m(i))}}}function In(n){let e,l;function t(s,a){var r;return a[0]&16518&&(e=null),e==null&&(e=!!((r=s[7][s[1]][s[2]].get(s[49]))!=null&&r.title)),e?On:Sn}let o=t(n,[-1,-1]),i=o(n);return{c(){i.c(),l=se()},l(s){i.l(s),l=se()},m(s,a){i.m(s,a),N(s,l,a)},p(s,a){o===(o=t(s,a))&&i?i.p(s,a):(i.d(1),i=o(s),i&&(i.c(),i.m(l.parentNode,l)))},d(s){s&&m(l),i.d(s)}}}function Mn(n){let e,l=(n[51]+1).toString().padStart(2,"0")+"",t;return{c(){e=C("div"),t=D(l),this.h()},l(o){e=P(o,"DIV",{class:!0});var i=U(e);t=B(i,l),i.forEach(m),this.h()},h(){v(e,"class","rounded-full w-[1.5em] h-[1.5em] variant-soft-primary h6 text-center")},m(o,i){N(o,e,i),w(e,t)},p:X,d(o){o&&m(e)}}}function Ct(n){var u;let e,l,t,o,i;function s(f){n[29](f)}function a(){return n[30](n[51])}let r={name:((u=n[7][n[1]][n[2]].get(n[49]))==null?void 0:u.identifier)??"",value:n[51],class:"truncate ",padding:"px-2 py-2",labelledby:"truncate",$$slots:{lead:[Mn],default:[In]},$$scope:{ctx:n}};return n[8]!==void 0&&(r.group=n[8]),e=new Lt({props:r}),Pe.push(()=>Oe(e,"group",s)),e.$on("change",a),{c(){ae(e.$$.fragment),t=j(),o=C("hr")},l(f){re(e.$$.fragment,f),t=V(f),o=P(f,"HR",{})},m(f,c){ue(e,f,c),N(f,t,c),N(f,o,c),i=!0},p(f,c){var h;n=f;const d={};c[0]&16518&&(d.name=((h=n[7][n[1]][n[2]].get(n[49]))==null?void 0:h.identifier)??""),c[0]&16518|c[1]&2097152&&(d.$$scope={dirty:c,ctx:n}),!l&&c[0]&256&&(l=!0,d.group=n[8],Se(()=>l=!1)),e.$set(d)},i(f){i||(z(e.$$.fragment,f),i=!0)},o(f){q(e.$$.fragment,f),i=!1},d(f){f&&(m(t),m(o)),fe(e,f)}}}function Fn(n){let e,l,t=Ee(n[14]),o=[];for(let s=0;s<t.length;s+=1)o[s]=Ct(Nt(n,t,s));const i=s=>q(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=se()},l(s){for(let a=0;a<o.length;a+=1)o[a].l(s);e=se()},m(s,a){for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(s,a);N(s,e,a),l=!0},p(s,a){if(a[0]&16774){t=Ee(s[14]);let r;for(r=0;r<t.length;r+=1){const u=Nt(s,t,r);o[r]?(o[r].p(u,a),z(o[r],1)):(o[r]=Ct(u),o[r].c(),z(o[r],1),o[r].m(e.parentNode,e))}for(me(),r=t.length;r<o.length;r+=1)i(r);be()}},i(s){if(!l){for(let a=0;a<t.length;a+=1)z(o[a]);l=!0}},o(s){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)q(o[a]);l=!1},d(s){s&&m(e),Ye(o,s)}}}function Pt(n){let e,l;return e=new cl({props:{relays:n[5][n[1]].searchRelays,$$slots:{default:[Rn]},$$scope:{ctx:n}}}),{c(){ae(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,o){ue(e,t,o),l=!0},p(t,o){const i={};o[0]&34&&(i.relays=t[5][t[1]].searchRelays),o[0]&7683|o[1]&2097152&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){l||(z(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){fe(e,t)}}}function Rn(n){let e,l,t,o,i;function s(f){n[32](f)}function a(f){n[33](f)}function r(f){n[34](f)}let u={listEvent:n[9],pubkey:n[1],DeleteNote:n[16],MoveNote:n[17],CheckNote:n[18]};return n[0]!==void 0&&(u.bkm=n[0]),n[11]!==void 0&&(u.isOwner=n[11]),n[12]!==void 0&&(u.viewList=n[12]),e=new dl({props:u}),n[31](e),Pe.push(()=>Oe(e,"bkm",s)),Pe.push(()=>Oe(e,"isOwner",a)),Pe.push(()=>Oe(e,"viewList",r)),e.$on("EditTag",n[22]),{c(){ae(e.$$.fragment)},l(f){re(e.$$.fragment,f)},m(f,c){ue(e,f,c),i=!0},p(f,c){const d={};c[0]&512&&(d.listEvent=f[9]),c[0]&2&&(d.pubkey=f[1]),!l&&c[0]&1&&(l=!0,d.bkm=f[0],Se(()=>l=!1)),!t&&c[0]&2048&&(t=!0,d.isOwner=f[11],Se(()=>t=!1)),!o&&c[0]&4096&&(o=!0,d.viewList=f[12],Se(()=>o=!1)),e.$set(d)},i(f){i||(z(e.$$.fragment,f),i=!0)},o(f){q(e.$$.fragment,f),i=!1},d(f){n[31](null),fe(e,f)}}}function Ln(n){let e;function l(i,s){return i[13]?Bn:Dn}let t=l(n),o=t(n);return{c(){e=C("div"),o.c(),this.h()},l(i){e=P(i,"DIV",{class:!0});var s=U(e);o.l(s),s.forEach(m),this.h()},h(){v(e,"class","flex w-full h-full justify-center items-center text-center")},m(i,s){N(i,e,s),o.m(e,null)},p(i,s){t!==(t=l(i))&&(o.d(1),o=t(i),o&&(o.c(),o.m(e,null)))},d(i){i&&m(e),o.d()}}}function Un(n){return{c:X,l:X,m:X,p:X,d:X}}function Dn(n){let e="no data",l;return{c(){l=D(e)},l(t){l=B(t,e)},m(t,o){N(t,l,o)},d(t){t&&m(l)}}}function Bn(n){let e="now loading...",l;return{c(){l=D(e)},l(t){l=B(t,e)},m(t,o){N(t,l,o)},d(t){t&&m(l)}}}function St(n){let e,l,t;function o(a,r){return a[15]?jn:Vn}let i=o(n),s=i(n);return{c(){e=C("div"),l=C("div"),s.c(),this.h()},l(a){e=P(a,"DIV",{class:!0});var r=U(e);l=P(r,"DIV",{class:!0});var u=U(l);s.l(u),u.forEach(m),r.forEach(m),this.h()},h(){v(l,"class","fill-white overflow-x-hidden h-fit overflow-y-auto"),v(e,"class",t="fixed bottom-14 z-10 box-border overflow-x-hidden "+(n[15]?"multi":"add")+" svelte-19ki1gq")},m(a,r){N(a,e,r),w(e,l),s.m(l,null)},p(a,r){i===(i=o(a))&&s?s.p(a,r):(s.d(1),s=i(a),s&&(s.c(),s.m(l,null))),r[0]&32768&&t!==(t="fixed bottom-14 z-10 box-border overflow-x-hidden "+(a[15]?"multi":"add")+" svelte-19ki1gq")&&v(e,"class",t)},d(a){a&&m(e),s.d()}}}function jn(n){let e,l,t,o,i,s,a;return{c(){e=C("button"),l=new We(!1),t=j(),o=C("button"),i=new We(!1),this.h()},l(r){e=P(r,"BUTTON",{class:!0});var u=U(e);l=Ke(u,!1),u.forEach(m),t=V(r),o=P(r,"BUTTON",{class:!0});var f=U(o);i=Ke(f,!1),f.forEach(m),this.h()},h(){l.a=null,v(e,"class","addIcon btn-icon variant-filled-secondary fill-white hover:variant-ghost-secondary hover:stroke-secondary-500 overflow-x-hidden"),i.a=null,v(o,"class","overflow-x-hidden addIcon btn-icon variant-filled-warning fill-white mx-1 hover:variant-ghost-warning hover:stroke-warning-500")},m(r,u){N(r,e,u),l.m(bl,e),N(r,t,u),N(r,o,u),i.m(gl,o),s||(a=[G(e,"click",n[20]),G(o,"click",n[21])],s=!0)},p:X,d(r){r&&(m(e),m(t),m(o)),s=!1,pe(a)}}}function Vn(n){let e,l,t,o;return{c(){e=C("button"),l=new We(!1),this.h()},l(i){e=P(i,"BUTTON",{class:!0});var s=U(e);l=Ke(s,!1),s.forEach(m),this.h()},h(){l.a=null,v(e,"class","addIcon btn-icon variant-filled-secondary fill-white hover:variant-ghost-secondary hover:stroke-secondary-500 overflow-x-hidden")},m(i,s){N(i,e,s),l.m(wl,e),t||(o=G(e,"click",n[19]),t=!0)},p:X,d(i){i&&m(e),t=!1,o()}}}function zn(n){let e,l,t,o,i,s,a,r,u,f,c,d,h;function g(_){n[27](_)}function A(_){n[28](_)}let S={kind:n[2],pubkey:n[1]};n[0]!==void 0&&(S.bkm=n[0]),n[9]!==void 0&&(S.viewEvent=n[9]),e=new al({props:S}),Pe.push(()=>Oe(e,"bkm",g)),Pe.push(()=>Oe(e,"viewEvent",A));let b=!n[3]&&Tt(n),p=n[5]&&n[5][n[1]]&&n[5][n[1]].searchRelays&&n[5][n[1]].searchRelays.length>0&&Pt(n);function E(_,k){return _[6]&&_[6][_[1]]&&_[6][_[1]][_[2]]&&_[6][_[1]][_[2]].size>0?Un:Ln}let F=E(n),L=F(n),I=!n[13]&&n[4]===n[1]&&St(n);return{c(){ae(e.$$.fragment),o=j(),i=C("div"),s=C("div"),b&&b.c(),a=j(),r=C("main"),p&&p.c(),f=j(),L.c(),c=j(),I&&I.c(),d=se(),this.h()},l(_){re(e.$$.fragment,_),o=V(_),i=P(_,"DIV",{class:!0});var k=U(i);s=P(k,"DIV",{class:!0});var O=U(s);b&&b.l(O),a=V(O),r=P(O,"MAIN",{class:!0});var y=U(r);p&&p.l(y),y.forEach(m),O.forEach(m),k.forEach(m),f=V(_),L.l(_),c=V(_),I&&I.l(_),d=se(),this.h()},h(){v(r,"class",u="flex-1 "+(n[3]?"":"md:ml-[12em]")+" overflow-y-auto h-fit overflow-x-hidden pb-[2em]"),v(s,"class","flex overflow-x-hidden"),v(i,"class","mb-12 mt-16 container max-w-[1024px] h-full mx-auto justify-center items-center box-border")},m(_,k){ue(e,_,k),N(_,o,k),N(_,i,k),w(i,s),b&&b.m(s,null),w(s,a),w(s,r),p&&p.m(r,null),N(_,f,k),L.m(_,k),N(_,c,k),I&&I.m(_,k),N(_,d,k),h=!0},p(_,k){const O={};k[0]&4&&(O.kind=_[2]),k[0]&2&&(O.pubkey=_[1]),!l&&k[0]&1&&(l=!0,O.bkm=_[0],Se(()=>l=!1)),!t&&k[0]&512&&(t=!0,O.viewEvent=_[9],Se(()=>t=!1)),e.$set(O),_[3]?b&&(me(),q(b,1,1,()=>{b=null}),be()):b?(b.p(_,k),k[0]&8&&z(b,1)):(b=Tt(_),b.c(),z(b,1),b.m(s,a)),_[5]&&_[5][_[1]]&&_[5][_[1]].searchRelays&&_[5][_[1]].searchRelays.length>0?p?(p.p(_,k),k[0]&34&&z(p,1)):(p=Pt(_),p.c(),z(p,1),p.m(r,null)):p&&(me(),q(p,1,1,()=>{p=null}),be()),(!h||k[0]&8&&u!==(u="flex-1 "+(_[3]?"":"md:ml-[12em]")+" overflow-y-auto h-fit overflow-x-hidden pb-[2em]"))&&v(r,"class",u),F===(F=E(_))&&L?L.p(_,k):(L.d(1),L=F(_),L&&(L.c(),L.m(c.parentNode,c))),!_[13]&&_[4]===_[1]?I?I.p(_,k):(I=St(_),I.c(),I.m(d.parentNode,d)):I&&(I.d(1),I=null)},i(_){h||(z(e.$$.fragment,_),z(b),z(p),h=!0)},o(_){q(e.$$.fragment,_),q(b),q(p),h=!1},d(_){_&&(m(o),m(i),m(f),m(c),m(d)),fe(e,_),b&&b.d(),p&&p.d(),L.d(_),I&&I.d(_)}}}function Hn(n,e,l){let t,o,i,s,a,r,u,f,c,d,h,g,A;ne(n,Re,T=>l(36,t=T)),ne(n,nt,T=>l(4,o=T)),ne(n,Be,T=>l(5,i=T)),ne(n,at,T=>l(25,s=T)),ne(n,vl,T=>l(6,a=T)),ne(n,ce,T=>l(13,r=T)),ne(n,Xe,T=>l(14,u=T)),ne(n,Ut,T=>l(7,f=T)),ne(n,rl,T=>l(37,c=T)),ne(n,Je,T=>l(26,d=T)),ne(n,Fe,T=>l(8,h=T)),ne(n,De,T=>l(38,g=T)),ne(n,Ue,T=>l(15,A=T));let{bkm:S="pub"}=e,b,{pubkey:p}=e,{kind:E}=e,{identifier:F=void 0}=e,{isNaddr:L}=e,I,_,k=!1;el(async()=>{k||(console.log("onMount"),k=!0,await O(),k=!1)}),kl(async()=>{k||(console.log("afterNavigate"),k=!0,Z(Fe,h=0,h),Z(Je,d=0,d),await O(),k=!1)});const O=async()=>{Z(ce,r=!0,r),console.log("onMount executed"),await y(p),Z(ce,r=!1,r)};async function y(T){if(Z(Fe,h=0,h),l(0,S="pub"),Z(Ue,A=!1,A),console.log("bkminit"),(o===void 0||o==="")&&Z(nt,o=await ul(),o),console.log(o),!i||!i[T]){const te={message:`${t("toast.relaySearching")}`},x=oe.trigger(te);Z(Be,i[T]=ot,i),await it(T),oe.close(x)}T!==o&&!i[o]&&(Z(Be,i[o]=ot,i),it(o));const J=F===void 0?[{kinds:[E],authors:[T]}]:[{kinds:[E],authors:[T],"#d":[F]}],K={message:`${t("toast.eventSearching")}`},H=oe.trigger(K);fl(p,E,{relays:i[p].bookmarkRelays,filters:J}),I.viewUpdate(),oe.close(H)}const M={ref:pl,slot:"<p>Skeleton</p>"};async function R(T){if(r)return;console.log("DeleteNote");const J=T.detail.number+d*c,K=h;console.log(J);const H={type:"component",component:M,title:t("modal.deleteNote.title"),body:`${t("modal.deleteNote.body")}`,value:{event:[T.detail.event],tags:[T.detail.tagArray]},response:async te=>{te&&(Z(ce,r=!0,r),await W(K,[J]),Z(ce,r=!1,r))}};ye.trigger(H)}async function W(T,J){if(console.log(J),a)try{const K=a[p][E].get(s[T]);if(K){const H={id:"",pubkey:K.pubkey,created_at:Math.floor(Date.now()/1e3),kind:K.kind,tags:S==="pub"?_l(K.tags,J):K.tags,content:S==="pub"?K.content:await ml(K.content,K.pubkey,J),sig:""},te=await je(H,i[o].bookmarkRelays);if(te.isSuccess&&a&&te.event){I.viewUpdate(),a[p][E].set(s[T],te.event),l(9,b=a[p][E].get(s[T]));const x={message:"Delete note<br>"+te.msg,timeout:3e3};oe.trigger(x)}else{const x={message:t("toast.failed_publish"),timeout:3e3,background:"bg-orange-500 text-white width-filled "};oe.trigger(x)}}}catch{const H={message:t("toast.failed_publish"),timeout:3e3,background:"bg-orange-500 text-white width-filled "};oe.trigger(H)}Z(De,g=[],g),Z(Ue,A=!1,A)}const $={ref:Pn};function ie(T){var x;if(r)return;console.log("MoveNote");const J=T.detail.number+d*c;console.log(J),console.log(T.detail.event),console.log(T.detail.tagArray);const K=h,H=S,te={type:"component",component:$,title:t("modal.moveNote.title"),body:`${t("modal.moveNote.body_from")} ${(x=f[p][E].get(u[K]))==null?void 0:x.identifier}[${t(H==="pub"?"public":"private")}] ${t("modal.moveNote.body_to")}`,value:{bkm:H,tag:K,kind:E,pubkey:p},response:async _e=>{_e&&(Z(ce,r=!0,r),await Qe([J],[T.detail.tagArray],{tag:K,bkm:H},{tag:_e.tag,bkm:_e.bkm}),Z(ce,r=!1,r))}};ye.trigger(te)}function de(T){console.log(T),console.log("CheckNote"),T.detail.number+d*c,console.log(g)}const Y={ref:wn,props:{background:"bg-red-500"},slot:"<p>Skeleton</p>"};function ke(){var J,K,H;const T={type:"component",component:Y,title:(J=f[p])!=null&&J[E]&&f[p][E].has(u[h])&&((K=f[p][E].get(u[h]))!=null&&K.identifier)?(H=f[p][E].get(u[h]))==null?void 0:H.identifier:`kind:${E}`,body:"",value:{type:"add",kind:E,pubkey:p},response:async te=>{console.log(te),Z(ce,r=!0,r),await He(te),Z(ce,r=!1,r)}};ye.trigger(T)}async function He(T){if(console.log(T),T){const J=h;try{await Le(J,T.btn,[T.tag],p,E,T.check)}catch(K){console.log(K);const H={message:t("toast.invalidEmoji"),timeout:3e3,background:"bg-orange-500 text-white width-filled "};oe.trigger(H)}Z(ce,r=!1,r)}}async function Le(T,J,K,H,te,x){var Ae,we,Ce;let _e=!1;try{const le=(we=(Ae=a==null?void 0:a[H])==null?void 0:Ae[te])==null?void 0:we.get(s[T]);if(le){const Yt=()=>J==="pub"?(x&&K.map(Ie=>{if((le==null?void 0:le.tags.findIndex(Qt=>Qt.slice(0,2).every(($t,xt)=>$t===Ie[xt])))!==-1)throw Error("$_('toast.invalidEmoji')")}),[...le.tags,...K]):le.tags,Zt=async()=>{if(J==="pub")return le&&le.content?le.content:"";if(le&&le.content)try{return await st(le.content,H,K,x)}catch(Ie){throw Error(Ie)}else return await st("",H,K,x)},$e={id:"",pubkey:H,created_at:Math.floor(Date.now()/1e3),kind:te,tags:Yt(),content:await Zt(),sig:""};console.log($e);const Me=await je($e,(Ce=i[o])==null?void 0:Ce.bookmarkRelays);if(Me.isSuccess){I.viewUpdate();const xe={message:Me.isSuccess?"Add note<br>"+Me.msg:t("toast.failed_publish"),timeout:3e3,background:Me.isSuccess?"variant-filled-secondary width-filled":"bg-orange-500 text-white width-filled "};oe.trigger(xe),_e=Me.isSuccess}else{const Ie={message:t("toast.failed_publish"),timeout:3e3,background:"bg-orange-500 text-white width-filled "};oe.trigger(Ie)}}}catch(le){throw Error(le)}return _e}let qe;function Dt(){const T=h,J=S,K=g.map(x=>x.index+d*c),H=g.map(x=>x.tagArray),te={type:"component",component:$,title:t("modal.moveNote.title"),body:`${t("modal.moveNote.body_from")} ${f[T]}[${t(J==="pub"?"public":"private")}] ${t("modal.moveNote.body_to")}`,value:{bkm:J,tag:T,pubkey:p,kind:E},response:async x=>{x&&(Z(ce,r=!0,r),console.log(x.bkm),await Qe(K,H,{tag:T,bkm:J},{tag:x.tag,bkm:x.bkm}),Z(ce,r=!1,r))}};ye.trigger(te)}function Bt(){console.log(g);const T=h,J=g.map(H=>H.index+d*c);console.log(J);const K={type:"component",component:M,title:t("modal.deleteNote.title"),body:`${t("modal.deleteNote.body")}`,value:{event:g.map(H=>H.event),tags:g.map(H=>H.tagArray)},response:async H=>{H&&(Z(ce,r=!0,r),await W(T,J),Z(ce,r=!1,r))}};ye.trigger(K)}async function Qe(T,J,K,H){if(console.log(`list:${K.tag} bkm:${K.bkm} の${T}番目のノートをlist:${H.tag}のbkm:${H.bkm}に移動させる`),a[p][E].size>0){if(!await Le(H.tag,H.bkm,J,p,E,!1))return;await W(K.tag,T),I.viewUpdate()}}function jt(T){var x,_e,Ae,we,Ce;console.log(T.detail);const J=h,K=T.detail.number+d*c,H=T.detail.tagArray,te={type:"component",component:Y,title:(x=f[p])!=null&&x[E]&&f[p][E].has(u[J])&&((_e=f[p][E].get(u[J]))!=null&&_e.identifier)?(Ae=f[p][E].get(u[J]))==null?void 0:Ae.identifier:`kind:${E}`,body:"",value:{type:"edit",kind:E,pubkey:p,event:(Ce=(we=a[p])==null?void 0:we[E])==null?void 0:Ce.get(s[J]),tag:H,number:K},response:async le=>{le&&JSON.stringify(le.tag)!==JSON.stringify(H)&&(console.log(JSON.stringify(le.tag)!==JSON.stringify(H)),le.btn=S,Z(ce,r=!0,r),await Vt(J,le,K),Z(ce,r=!1,r))}};ye.trigger(te)}async function Vt(T,J,K){var te;const H=a[p][E].get(s[T]);if(H){const x=H.tags;J.btn==="pub"&&(x[K]=J.tag);const _e=async()=>J.btn==="pub"?H.content:await hl(H.content,p,K,J.tag),Ae={id:"",pubkey:p,created_at:Math.floor(Date.now()/1e3),kind:H.kind,tags:x,content:await _e(),sig:""};console.log(Ae);const we=await je(Ae,(te=i[o])==null?void 0:te.bookmarkRelays);if(we.isSuccess){const le={message:we.isSuccess?"Add note<br>"+we.msg:t("toast.failed_publish"),timeout:3e3,background:we.isSuccess?"variant-filled-secondary width-filled":"bg-orange-500 text-white width-filled "};oe.trigger(le)}else{const Ce={message:t("toast.failed_publish"),timeout:3e3,background:"bg-orange-500 text-white width-filled "};oe.trigger(Ce)}}}function zt(T){S=T,l(0,S),l(8,h)}function Ht(T){b=T,l(9,b),l(6,a),l(1,p),l(2,E),l(25,s),l(8,h)}function qt(T){h=T,Fe.set(h)}const Jt=T=>{Z(Fe,h=T,h)};function Wt(T){Pe[T?"unshift":"push"](()=>{I=T,l(10,I)})}function Kt(T){S=T,l(0,S),l(8,h)}function Gt(T){_=T,l(11,_),l(4,o),l(1,p)}function Xt(T){qe=T,l(12,qe)}return n.$$set=T=>{"bkm"in T&&l(0,S=T.bkm),"pubkey"in T&&l(1,p=T.pubkey),"kind"in T&&l(2,E=T.kind),"identifier"in T&&l(23,F=T.identifier),"isNaddr"in T&&l(3,L=T.isNaddr)},n.$$.update=()=>{n.$$.dirty[0]&32&&console.log(i),n.$$.dirty[0]&18&&l(11,_=o===p),n.$$.dirty[0]&70&&Z(at,s=a[p]&&a[p][E]?Array.from(a[p][E].keys()).sort((T,J)=>T.localeCompare(J)):[],s),n.$$.dirty[0]&134&&Z(Xe,u=f[p]&&f[p][E]?Array.from(f[p][E].keys()).sort((T,J)=>T.localeCompare(J)):[],u),n.$$.dirty[0]&33554758&&(a[p]&&a[p][E]?l(9,b=a[p][E].get(s[h])):l(9,b=void 0)),n.$$.dirty[0]&256&&h!==-1&&typeof window<"u"&&(Z(Ue,A=!1,A),Z(Je,d=0,d),Z(De,g=[],g),l(0,S="pub"),window.scrollTo({top:0})),n.$$.dirty[0]&67108865&&(d!==-1||S)&&typeof window<"u"&&(Z(De,g=[],g),window.scrollTo({top:0}))},[S,p,E,L,o,i,a,f,h,b,I,_,qe,r,u,A,R,ie,de,ke,Dt,Bt,jt,F,y,s,d,zt,Ht,qt,Jt,Wt,Kt,Gt,Xt]}class $n extends he{constructor(e){super(),ve(this,e,Hn,zn,ge,{bkm:0,pubkey:1,kind:2,identifier:23,isNaddr:3,bkminit:24},null,[-1,-1])}get bkminit(){return this.$$.ctx[24]}}export{$n as L};
