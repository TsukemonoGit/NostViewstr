import{w as K}from"./index.ffcfcb07.js";import{X as P,u as Y,a9 as z}from"./scheduler.b8cd85ff.js";const B=K(void 0);function J(n,t){const{computePosition:c,autoUpdate:f,offset:l,shift:a,flip:b,arrow:m,size:$,autoPlacement:s,hide:p,inline:E}=P(B),i={open:!1,autoUpdateCleanup:()=>{}},v=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let y;const u="https://www.skeleton.dev/utilities/popups";let e,r;function U(){e=document.querySelector(`[data-popup="${t.target}"]`)??document.createElement("div"),r=e.querySelector(".arrow")??document.createElement("div")}U();function L(){var d,h,x,A,C,D,q,I;if(!e)throw new Error(`The data-popup="${t.target}" element was not found. ${u}`);if(!c)throw new Error(`Floating UI 'computePosition' not found for data-popup="${t.target}". ${u}`);if(!l)throw new Error(`Floating UI 'offset' not found for data-popup="${t.target}". ${u}`);if(!a)throw new Error(`Floating UI 'shift' not found for data-popup="${t.target}". ${u}`);if(!b)throw new Error(`Floating UI 'flip' not found for data-popup="${t.target}". ${u}`);if(!m)throw new Error(`Floating UI 'arrow' not found for data-popup="${t.target}". ${u}`);const o=[];$&&o.push($((d=t.middleware)==null?void 0:d.size)),s&&o.push(s((h=t.middleware)==null?void 0:h.autoPlacement)),p&&o.push(p((x=t.middleware)==null?void 0:x.hide)),E&&o.push(E((A=t.middleware)==null?void 0:A.inline)),c(n,e,{placement:t.placement??"bottom",middleware:[l(((C=t.middleware)==null?void 0:C.offset)??8),a(((D=t.middleware)==null?void 0:D.shift)??{padding:8}),b((q=t.middleware)==null?void 0:q.flip),m(((I=t.middleware)==null?void 0:I.arrow)??{element:r||null}),...o]}).then(({x:O,y:Q,placement:j,middlewareData:V})=>{if(Object.assign(e.style,{left:`${O}px`,top:`${Q}px`}),r){const{x:T,y:W}=V.arrow,X={top:"bottom",right:"left",bottom:"top",left:"right"}[j.split("-")[0]];Object.assign(r.style,{left:T!=null?`${T}px`:"",top:W!=null?`${W}px`:"",right:"",bottom:"",[X]:"-4px"})}})}function _(){e&&(i.open=!0,t.state&&t.state({state:i.open}),L(),e.style.display="block",e.style.opacity="1",e.style.pointerEvents="auto",e.removeAttribute("inert"),i.autoUpdateCleanup=f(n,e,L),y=Array.from(e==null?void 0:e.querySelectorAll(v)))}function w(o){if(!e)return;const d=parseFloat(window.getComputedStyle(e).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{i.open=!1,t.state&&t.state({state:i.open}),e.style.opacity="0",e.setAttribute("inert",""),i.autoUpdateCleanup&&i.autoUpdateCleanup(),o&&o()},d)}function k(){i.open===!1?_():w()}function F(o){if(i.open===!1||n.contains(o.target))return;if(e&&e.contains(o.target)===!1){w();return}const d=t.closeQuery===void 0?"a[href], button":t.closeQuery;if(d==="")return;const h=e==null?void 0:e.querySelectorAll(d);h==null||h.forEach(x=>{x.contains(o.target)&&w()})}const S=o=>{if(i.open===!1)return;const d=o.key;if(d==="Escape"){o.preventDefault(),n.focus(),w();return}y=Array.from(e==null?void 0:e.querySelectorAll(v)),i.open&&document.activeElement===n&&(d==="ArrowDown"||d==="Tab")&&v.length>0&&y.length>0&&(o.preventDefault(),y[0].focus())};switch(t.event){case"click":n.addEventListener("click",k,!0),window.addEventListener("click",F,!0);break;case"hover":n.addEventListener("mouseover",_,!0),n.addEventListener("mouseleave",()=>w(),!0);break;case"focus-blur":n.addEventListener("focus",k,!0),n.addEventListener("blur",()=>w(),!0);break;case"focus-click":n.addEventListener("focus",_,!0),window.addEventListener("click",F,!0);break;default:throw new Error(`Event value of '${t.event}' is not supported. ${u}`)}return window.addEventListener("keydown",S,!0),L(),{update(o){w(()=>{t=o,L(),U()})},destroy(){n.removeEventListener("click",k,!0),n.removeEventListener("mouseover",_,!0),n.removeEventListener("mouseleave",()=>w(),!0),n.removeEventListener("focus",k,!0),n.removeEventListener("focus",_,!0),n.removeEventListener("blur",()=>w(),!0),window.removeEventListener("click",F,!0),window.removeEventListener("keydown",S,!0)}}}function M(n){const t=n-1;return t*t*t+1}function R(n,{delay:t=0,duration:c=400,easing:f=Y}={}){const l=+getComputedStyle(n).opacity;return{delay:t,duration:c,easing:f,css:a=>`opacity: ${a*l}`}}function Z(n,{delay:t=0,duration:c=400,easing:f=M,x:l=0,y:a=0,opacity:b=0}={}){const m=getComputedStyle(n),$=+m.opacity,s=m.transform==="none"?"":m.transform,p=$*(1-b),[E,i]=z(l),[v,y]=z(a);return{delay:t,duration:c,easing:f,css:(u,e)=>`
			transform: ${s} translate(${(1-u)*E}${i}, ${(1-u)*v}${y});
			opacity: ${$-p*e}`}}function g(n,{delay:t=0,duration:c=400,easing:f=M,axis:l="y"}={}){const a=getComputedStyle(n),b=+a.opacity,m=l==="y"?"height":"width",$=parseFloat(a[m]),s=l==="y"?["top","bottom"]:["left","right"],p=s.map(r=>`${r[0].toUpperCase()}${r.slice(1)}`),E=parseFloat(a[`padding${p[0]}`]),i=parseFloat(a[`padding${p[1]}`]),v=parseFloat(a[`margin${p[0]}`]),y=parseFloat(a[`margin${p[1]}`]),u=parseFloat(a[`border${p[0]}Width`]),e=parseFloat(a[`border${p[1]}Width`]);return{delay:t,duration:c,easing:f,css:r=>`overflow: hidden;opacity: ${Math.min(r*20,1)*b};${m}: ${r*$}px;padding-${s[0]}: ${r*E}px;padding-${s[1]}: ${r*i}px;margin-${s[0]}: ${r*v}px;margin-${s[1]}: ${r*y}px;border-${s[0]}-width: ${r*u}px;border-${s[1]}-width: ${r*e}px;`}}function N(n,t){const{transition:c,params:f,enabled:l}=t;return l?c(n,f):"duration"in f?c(n,{duration:0}):{duration:0}}export{Z as a,g as b,M as c,N as d,R as f,J as p,B as s};
