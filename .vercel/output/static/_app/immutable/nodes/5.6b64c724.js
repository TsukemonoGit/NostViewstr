import{n as b}from"../chunks/index.ee7fcb47.js";import{e as w}from"../chunks/kind.df02593b.js";import{r as D,i as z,d as A,F as C}from"../chunks/FooterMenu.1197af10.js";import{X as O,s as W,f as N,a as P,e as R,N as X,g as I,d as m,c as T,j as k,C as M,i as h,p as j,W as q,r as B}from"../chunks/scheduler.b8cd85ff.js";import{S as G,i as H,t as y,c as J,a as g,g as K,p as L,b as v,d as S,m as E,e as F}from"../chunks/index.35665f17.js";import{L as Q}from"../chunks/ListedEventList.afa0c082.js";import{S as U}from"../chunks/Settings.ed552a17.js";const V=({params:o})=>{console.log(o.naddr);try{const{type:t,data:a}=b.decode(o.naddr);if(console.log("[decode]",t,a),t==="naddr"){const e=a;if(e.relays&&e.relays){const s=O(D);s[e.pubkey]=z,s[e.pubkey].bookmarkRelays=e.relays,s[e.pubkey].postRelays=e.relays,s[e.pubkey].searchRelays=A,D.set(s)}return{pubkey:e.pubkey,kind:e.kind,identifier:e.identifier,relays:e.relays?e.relays:[]}}else throw console.error("[type error]",t),w(404,"Not Found")}catch(t){throw console.error("[naddr decode error]",t),w(404,"Not Found")}},ue=Object.freeze(Object.defineProperty({__proto__:null,load:V},Symbol.toStringTag,{value:"Module"}));function Y(o){let t,a,e,s,c,i;function u(n){o[5](n)}let d={kind:o[2],identifier:o[3],isNaddr:!0};o[0].pubkey!==void 0&&(d.pubkey=o[0].pubkey),t=new Q({props:d}),j.push(()=>L(t,"pubkey",u));function f(n){o[6](n)}let p={kind:o[2],naddr:!0};return o[0].pubkey!==void 0&&(p.pubkey=o[0].pubkey),s=new C({props:p}),j.push(()=>L(s,"pubkey",f)),{c(){v(t.$$.fragment),e=P(),v(s.$$.fragment)},l(n){S(t.$$.fragment,n),e=T(n),S(s.$$.fragment,n)},m(n,_){E(t,n,_),h(n,e,_),E(s,n,_),i=!0},p(n,_){const r={};!a&&_&1&&(a=!0,r.pubkey=n[0].pubkey,q(()=>a=!1)),t.$set(r);const l={};!c&&_&1&&(c=!0,l.pubkey=n[0].pubkey,q(()=>c=!1)),s.$set(l)},i(n){i||(g(t.$$.fragment,n),g(s.$$.fragment,n),i=!0)},o(n){y(t.$$.fragment,n),y(s.$$.fragment,n),i=!1},d(n){n&&m(e),F(t,n),F(s,n)}}}function Z(o){let t,a;return t=new U({props:{settingFunc:o[4]}}),{c(){v(t.$$.fragment)},l(e){S(t.$$.fragment,e)},m(e,s){E(t,e,s),a=!0},p:B,i(e){a||(g(t.$$.fragment,e),a=!0)},o(e){y(t.$$.fragment,e),a=!1},d(e){F(t,e)}}}function x(o){let t,a,e,s,c,i,u,d,f;const p=[Z,Y],n=[];function _(r,l){return r[1]?1:0}return i=_(o),u=n[i]=p[i](o),{c(){t=N("meta"),e=N("meta"),c=P(),u.c(),d=R(),this.h()},l(r){const l=X("svelte-zrrgk2",document.head);t=I(l,"META",{name:!0,content:!0}),e=I(l,"META",{property:!0,content:!0}),l.forEach(m),c=T(r),u.l(r),d=R(),this.h()},h(){k(t,"name","description"),k(t,"content",a="nostr kind:"+o[0].kind+" ID:"+o[3]+`
pubkey:`+b.npubEncode(o[0].pubkey)),k(e,"property","og:description"),k(e,"content",s="kind:"+o[0].kind+" ID:"+o[3]+`
pubkey:`+b.npubEncode(o[0].pubkey))},m(r,l){M(document.head,t),M(document.head,e),h(r,c,l),n[i].m(r,l),h(r,d,l),f=!0},p(r,[l]){(!f||l&1&&a!==(a="nostr kind:"+r[0].kind+" ID:"+r[3]+`
pubkey:`+b.npubEncode(r[0].pubkey)))&&k(t,"content",a),(!f||l&1&&s!==(s="kind:"+r[0].kind+" ID:"+r[3]+`
pubkey:`+b.npubEncode(r[0].pubkey)))&&k(e,"content",s);let $=i;i=_(r),i===$?n[i].p(r,l):(K(),y(n[$],1,1,()=>{n[$]=null}),J(),u=n[i],u?u.p(r,l):(u=n[i]=p[i](r),u.c()),g(u,1),u.m(d.parentNode,d))},i(r){f||(g(u),f=!0)},o(r){y(u),f=!1},d(r){r&&(m(c),m(d)),m(t),m(e),n[i].d(r)}}}function ee(o,t,a){let{data:e}=t;const s=e.kind,c=e.identifier;console.log("PageData",e.pubkey);let i=!1;async function u(){a(1,i=!0)}function d(p){o.$$.not_equal(e.pubkey,p)&&(e.pubkey=p,a(0,e))}function f(p){o.$$.not_equal(e.pubkey,p)&&(e.pubkey=p,a(0,e))}return o.$$set=p=>{"data"in p&&a(0,e=p.data)},[e,i,s,c,u,d,f]}class le extends G{constructor(t){super(),H(this,t,ee,x,W,{data:0})}}export{le as component,ue as universal};
